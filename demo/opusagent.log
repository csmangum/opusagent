2025-06-09 15:15:02,458 - run - INFO - Logging configured
2025-06-09 15:15:02,461 - run - INFO - === Server Configuration ===
2025-06-09 15:15:02,461 - run - INFO - Host: 0.0.0.0
2025-06-09 15:15:02,463 - run - INFO - Port: 8000
2025-06-09 15:15:02,464 - run - INFO - Log level: INFO
2025-06-09 15:15:02,464 - run - INFO - Environment: production
2025-06-09 15:15:02,464 - run - INFO - OpenAI API key configured: True
2025-06-09 15:15:02,464 - run - INFO - OpenAI API key format: Valid
2025-06-09 15:15:02,466 - run - INFO - =========================
2025-06-09 15:15:02,466 - run - INFO - Starting server with uvicorn...
2025-06-09 15:15:03,134 - call_recorder - INFO - Logging configured
2025-06-09 15:15:03,214 - telephony_realtime_bridge - INFO - Logging configured
2025-06-09 15:15:03,229 - twilio_realtime_bridge - INFO - Logging configured
2025-06-09 15:15:03,231 - main - INFO - Logging configured
2025-06-09 15:15:09,113 - multi_turn_test - INFO - Logging configured
2025-06-09 15:15:09,122 - multi_turn_test - INFO - [MAIN] Multi-Turn Conversation Test Tool
2025-06-09 15:15:09,122 - multi_turn_test - INFO - ==================================================
2025-06-09 15:15:09,122 - multi_turn_test - INFO - [MAIN] Running replacement card conversation flow
2025-06-09 15:15:09,122 - multi_turn_test - INFO - [TEST] Starting ReplacementCardConversation
2025-06-09 15:15:09,124 - multi_turn_test - INFO - ==================================================
2025-06-09 15:15:09,124 - multi_turn_test - INFO - [TEST] Using 5 audio files:
2025-06-09 15:15:09,124 - multi_turn_test - INFO -    1. need_to_replace_card.wav
2025-06-09 15:15:09,126 - multi_turn_test - INFO -    2. my_gold_card.wav
2025-06-09 15:15:09,126 - multi_turn_test - INFO -    3. i_lost_it.wav
2025-06-09 15:15:09,126 - multi_turn_test - INFO -    4. yes_that_address.wav
2025-06-09 15:15:09,126 - multi_turn_test - INFO -    5. thanks_thats_all.wav
2025-06-09 15:15:09,128 - multi_turn_test - INFO - [MOCK] Connecting to bridge at ws://localhost:8000/voice-agent...
2025-06-09 15:15:11,227 - main - INFO - ------ Incoming telephony connection from Address(host='127.0.0.1', port=52541) ------
2025-06-09 15:15:11,229 - main - INFO - ------ Telephony connection accepted from Address(host='127.0.0.1', port=52541) ------
2025-06-09 15:15:11,230 - main - INFO - Attempting to connect to OpenAI Realtime API...
2025-06-09 15:15:11,244 - multi_turn_test - INFO - [MOCK] Connected to bridge server
2025-06-09 15:15:11,244 - multi_turn_test - INFO - [MOCK] Sent session.initiate for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:11,906 - main - INFO - OpenAI WebSocket connection established
2025-06-09 15:15:11,907 - main - INFO - Telephony-Realtime bridge created
2025-06-09 15:15:11,907 - main - INFO - Initializing realtime-websocket session...
2025-06-09 15:15:11,910 - telephony_realtime_bridge - INFO - Sending session update: {"type":"session.update","event_id":null,"session":{"modalities":["text","audio"],"model":"gpt-4o-realtime-preview-2025-06-03","instructions":"You are a customer service agent for Bank of Peril. You help customers with their banking needs. When a customer contacts you, first greet them warmly, then listen to their request and call the call_intent function to identify their intent. After calling call_intent, use the function result to guide your response:\n- If intent is 'card_replacement', ask which type of card they need to replace (use the available_cards from the function result)\n- If intent is 'account_inquiry', ask what specific account information they need\n- For other intents, ask clarifying questions to better understand their needs\nAlways be helpful, professional, and use the information returned by functions to provide relevant follow-up questions.","voice":"verse","input_audio_format":"pcm16","output_audio_format":"pcm16","turn_detection":null,"tools":[{"type":"function","name":"get_balance","description":"Get the user's account balance.","parameters":{"type":"object","properties":{}}},{"type":"function","name":"transfer_funds","description":"Transfer funds to another account.","parameters":{"type":"object","properties":{"amount":{"type":"number"},"to_account":{"type":"string"}}}},{"type":"function","name":"transfer_to_human","description":"Transfer the conversation to a human agent.","parameters":{"type":"object","properties":{"reason":{"type":"string","description":"The reason for transferring to a human agent"},"priority":{"type":"string","enum":["low","normal","high"],"description":"The priority level of the transfer"},"context":{"type":"object","description":"Additional context to pass to the human agent"}},"required":["reason"]}},{"type":"function","name":"call_intent","description":"Get the user's intent.","parameters":{"type":"object","properties":{"intent":{"type":"string","enum":["card_replacement","account_inquiry","other"]}},"required":["intent"]}},{"type":"function","name":"member_account_confirmation","description":"Confirm which member account/card needs replacement.","parameters":{"type":"object","properties":{"member_accounts":{"type":"array","items":{"type":"string"},"description":"List of available member accounts/cards"},"organization_name":{"type":"string"}}}},{"type":"function","name":"replacement_reason","description":"Collect the reason for card replacement.","parameters":{"type":"object","properties":{"card_in_context":{"type":"string"},"reason":{"type":"string","enum":["Lost","Damaged","Stolen","Other"]}}}},{"type":"function","name":"confirm_address","description":"Confirm the address for card delivery.","parameters":{"type":"object","properties":{"card_in_context":{"type":"string"},"address_on_file":{"type":"string"},"confirmed_address":{"type":"string"}}}},{"type":"function","name":"start_card_replacement","description":"Start the card replacement process.","parameters":{"type":"object","properties":{"card_in_context":{"type":"string"},"address_in_context":{"type":"string"}}}},{"type":"function","name":"finish_card_replacement","description":"Finish the card replacement process and provide delivery information.","parameters":{"type":"object","properties":{"card_in_context":{"type":"string"},"address_in_context":{"type":"string"},"delivery_time":{"type":"string"}}}},{"type":"function","name":"wrap_up","description":"Wrap up the call with closing remarks.","parameters":{"type":"object","properties":{"organization_name":{"type":"string"}}}}],"tool_choice":"auto","temperature":0.8,"max_response_output_tokens":4096,"input_audio_transcription":{"model":"whisper-1"},"input_audio_noise_reduction":{"type":"near_field"}}}
2025-06-09 15:15:11,912 - main - INFO - realtime-websocket session initialized
2025-06-09 15:15:11,912 - main - INFO - Starting bridge tasks...
2025-06-09 15:15:11,914 - telephony_realtime_bridge - INFO - Received telephony message: session.initiate
2025-06-09 15:15:11,914 - telephony_realtime_bridge - INFO - Session initiate received: {'type': 'session.initiate', 'conversationId': '0b135b79-8451-4f58-af5a-b68b1bd2262a', 'expectAudioMessages': True, 'botName': 'ReplacementCardConversationBot', 'caller': '+15551234567', 'supportedMediaFormats': ['raw/lpcm16']}
2025-06-09 15:15:11,915 - telephony_realtime_bridge - INFO - Conversation started: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:11,916 - call_recorder - INFO - CallRecorder initialized for conversation 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:11,917 - call_recorder - INFO - Recording directory: call_recordings\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511
2025-06-09 15:15:11,918 - call_recorder - INFO - Audio settings - Caller: 16000Hz, Bot: 24000Hz, Target: 16000Hz
2025-06-09 15:15:11,921 - call_recorder - INFO - WAV files initialized for recording
2025-06-09 15:15:11,922 - call_recorder - INFO - Recording started for conversation 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:11,923 - telephony_realtime_bridge - INFO - Call recording started for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:11,925 - telephony_realtime_bridge - INFO - Session accepted with format: raw/lpcm16
2025-06-09 15:15:11,925 - multi_turn_test - INFO - [MOCK] Received from bridge: session.accepted
2025-06-09 15:15:11,925 - telephony_realtime_bridge - INFO - Received OpenAI message type: session.created
2025-06-09 15:15:11,926 - multi_turn_test - INFO - [MOCK] Session accepted with format: raw/lpcm16
2025-06-09 15:15:11,926 - telephony_realtime_bridge - INFO - Session created successfully
2025-06-09 15:15:11,926 - telephony_realtime_bridge - INFO - Attempting to send initial conversation item...
2025-06-09 15:15:11,927 - telephony_realtime_bridge - INFO - Sending initial conversation item: {"type": "conversation.item.create", "item": {"type": "message", "role": "user", "content": [{"type": "input_text", "text": "You are a customer service agent for Bank of Peril. You are given a task to help the customer with their banking needs. Start by saying 'Hello! How can I help you today?' You will infer the customer's intent from their response and call the call_intent function."}]}}
2025-06-09 15:15:11,998 - multi_turn_test - INFO - [MOCK] Starting multi-turn conversation with 5 turns
2025-06-09 15:15:11,998 - multi_turn_test - INFO - [MOCK] Waiting for initial greeting...
2025-06-09 15:15:11,999 - multi_turn_test - INFO - [MOCK] Waiting for LLM greeting...
2025-06-09 15:15:13,919 - telephony_realtime_bridge - INFO - Sending response create: {"type": "response.create", "response": {"modalities": ["text", "audio"], "output_audio_format": "pcm16", "temperature": 0.8, "max_output_tokens": 4096, "voice": "verse"}}
2025-06-09 15:15:13,921 - telephony_realtime_bridge - INFO - Initial conversation flow initiated successfully
2025-06-09 15:15:13,921 - telephony_realtime_bridge - INFO - Initial conversation item sent successfully
2025-06-09 15:15:13,923 - telephony_realtime_bridge - INFO - Received OpenAI message type: session.updated
2025-06-09 15:15:13,923 - telephony_realtime_bridge - INFO - Session updated successfully
2025-06-09 15:15:13,923 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:13,923 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:13,993 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-09 15:15:13,993 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_Bgf3n10Kg1pVMyyjGiwYL",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf3nlhiG71iq2hfmqU9P",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-09 15:15:13,993 - telephony_realtime_bridge - INFO - Response generation started: resp_Bgf3nlhiG71iq2hfmqU9P
2025-06-09 15:15:14,564 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-09 15:15:14,569 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_Bgf3n9hybWifebQcRySbk",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-09 15:15:14,569 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_Bgf3n9hybWifebQcRySbk', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-09 15:15:14,571 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:14,571 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:14,571 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-09 15:15:14,571 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-09 15:15:14,573 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-09 15:15:14,573 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:14,573 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:14,573 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: Hello
2025-06-09 15:15:14,573 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:14,573 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:14,577 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: !
2025-06-09 15:15:14,577 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:14,579 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:14,579 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  How
2025-06-09 15:15:14,579 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:14,579 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:14,581 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  can
2025-06-09 15:15:14,581 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:14,581 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 2
2025-06-09 15:15:14,583 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  I
2025-06-09 15:15:14,619 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:14,619 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-09 15:15:14,621 - telephony_realtime_bridge - INFO - Started play stream: 6ad0e3bc-2c06-4fd7-8883-2d248cf430cc
2025-06-09 15:15:14,621 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-09 15:15:14,621 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-09 15:15:14,623 - multi_turn_test - INFO - [MOCK] Play stream started: 6ad0e3bc-2c06-4fd7-8883-2d248cf430cc
2025-06-09 15:15:14,623 - call_recorder - INFO - Bot audio chunk #1: Original: 4800 bytes (100.0ms @ 24000Hz), Resampled: 3200 bytes (100.0ms @ 16000Hz)
2025-06-09 15:15:14,623 - multi_turn_test - INFO - [MOCK] Collecting greeting audio...
2025-06-09 15:15:14,623 - call_recorder - WARNING - Duration ratio mismatch: got 1.000, expected 0.667. This may indicate incorrect sample rate assumptions.
2025-06-09 15:15:14,623 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-09 15:15:14,627 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:14,628 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-09 15:15:14,666 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:14,666 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-09 15:15:14,669 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-09 15:15:14,671 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-09 15:15:14,671 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:14,671 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-09 15:15:14,713 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:14,713 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:14,715 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:14,716 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:14,716 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:14,716 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:14,719 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:14,719 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:14,719 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  help
2025-06-09 15:15:14,721 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:14,721 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:14,721 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-09 15:15:14,721 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:14,724 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-09 15:15:14,724 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  today
2025-06-09 15:15:14,724 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:14,724 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:14,724 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-09 15:15:14,777 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:14,779 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:14,780 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:14,780 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:14,780 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:14,780 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:14,809 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:14,811 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:14,811 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:14,813 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:14,813 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:14,816 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:14,900 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:14,900 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:14,900 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:14,911 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:14,912 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:14,912 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:14,922 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:14,922 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 37464
2025-06-09 15:15:14,924 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 14048 -> 9365 samples, 585.3ms -> 585.3ms
2025-06-09 15:15:14,928 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 37464 bytes)
2025-06-09 15:15:14,929 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-09 15:15:14,929 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:14,929 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-09 15:15:14,929 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (37464 bytes base64)
2025-06-09 15:15:14,931 - telephony_realtime_bridge - INFO - Stopped play stream: 6ad0e3bc-2c06-4fd7-8883-2d248cf430cc
2025-06-09 15:15:14,931 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-09 15:15:14,931 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-09 15:15:14,931 - multi_turn_test - INFO - [MOCK] Greeting collected: 7 chunks
2025-06-09 15:15:14,932 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): Hello! How can I help you today?
2025-06-09 15:15:14,932 - multi_turn_test - INFO - [MOCK] Play stream stopped: 6ad0e3bc-2c06-4fd7-8883-2d248cf430cc
2025-06-09 15:15:14,933 - call_recorder - INFO - Transcript added: [bot] Hello! How can I help you today?...
2025-06-09 15:15:14,933 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-09 15:15:14,933 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-09 15:15:14,933 - telephony_realtime_bridge - INFO - Content part completed
2025-06-09 15:15:14,938 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-09 15:15:14,939 - telephony_realtime_bridge - INFO - Output item completed
2025-06-09 15:15:14,940 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-09 15:15:14,941 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_Bgf3oYTUvM4ie9wyHfGIt",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf3nlhiG71iq2hfmqU9P",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_Bgf3n9hybWifebQcRySbk",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "Hello! How can I help you today?"
          }
        ]
      }
    ],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 605,
      "input_tokens": 551,
      "output_tokens": 54,
      "input_token_details": {
        "text_tokens": 551,
        "audio_tokens": 0,
        "cached_tokens": 0,
        "cached_tokens_details": {
          "text_tokens": 0,
          "audio_tokens": 0
        }
      },
      "output_token_details": {
        "text_tokens": 19,
        "audio_tokens": 35
      }
    },
    "metadata": null
  }
}
2025-06-09 15:15:14,941 - telephony_realtime_bridge - INFO - Response generation completed: resp_Bgf3nlhiG71iq2hfmqU9P
2025-06-09 15:15:14,943 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-09 15:15:14,999 - multi_turn_test - INFO - [MOCK] Greeting received: 7 chunks
2025-06-09 15:15:14,999 - multi_turn_test - INFO - [MOCK] Initial greeting received: 7 chunks
2025-06-09 15:15:14,999 - multi_turn_test - INFO - 
[MOCK] === Turn 1/5 ===
2025-06-09 15:15:14,999 - multi_turn_test - INFO - [MOCK] Sending: need_to_replace_card.wav
2025-06-09 15:15:14,999 - multi_turn_test - INFO - [MOCK] Loading audio: need_to_replace_card.wav
2025-06-09 15:15:14,999 - multi_turn_test - INFO -    Format: 1ch, 16bit, 24000Hz
2025-06-09 15:15:15,375 - multi_turn_test - INFO -    Resampling from 24000Hz to 16000Hz...
2025-06-09 15:15:15,413 - multi_turn_test - INFO -    Split into 2 chunks (~1.60s total)
2025-06-09 15:15:15,415 - multi_turn_test - INFO - [MOCK] Sending user audio: need_to_replace_card.wav (2 chunks)
2025-06-09 15:15:15,415 - telephony_realtime_bridge - INFO - Received telephony message: userStream.start
2025-06-09 15:15:15,415 - telephony_realtime_bridge - INFO - User stream start received: {'type': 'userStream.start', 'conversationId': '0b135b79-8451-4f58-af5a-b68b1bd2262a'}
2025-06-09 15:15:15,415 - telephony_realtime_bridge - INFO - User stream started for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:15,415 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.started
2025-06-09 15:15:15,415 - multi_turn_test - INFO - [MOCK] User stream started
2025-06-09 15:15:15,528 - multi_turn_test - DEBUG - [MOCK] Sent chunk 1/2
2025-06-09 15:15:15,528 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 42668 bytes
2025-06-09 15:15:15,528 - telephony_realtime_bridge - DEBUG - Processing audio chunk #1: 32000 -> 32000 bytes (~1000.0ms of audio). Total sent: 32000 bytes
2025-06-09 15:15:15,528 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 42668 bytes base64)
2025-06-09 15:15:15,570 - multi_turn_test - DEBUG - [MOCK] Sent chunk 2/2
2025-06-09 15:15:15,570 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 25600 bytes
2025-06-09 15:15:15,570 - telephony_realtime_bridge - DEBUG - Processing audio chunk #2: 19200 -> 19200 bytes (~600.0ms of audio). Total sent: 51200 bytes
2025-06-09 15:15:15,570 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 25600 bytes base64)
2025-06-09 15:15:15,592 - telephony_realtime_bridge - INFO - Received telephony message: userStream.stop
2025-06-09 15:15:15,592 - multi_turn_test - INFO - [MOCK] User audio sent successfully
2025-06-09 15:15:15,592 - multi_turn_test - INFO - [MOCK] Turn 1: User audio sent successfully
2025-06-09 15:15:15,592 - telephony_realtime_bridge - INFO - User stream stop received for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:15,592 - multi_turn_test - INFO - [MOCK] Waiting for LLM response...
2025-06-09 15:15:15,592 - telephony_realtime_bridge - INFO - Buffer state before commit: 2 chunks, 51200 bytes (~1600.0ms of audio)
2025-06-09 15:15:15,592 - telephony_realtime_bridge - INFO - realtime_websocket_object: <bound method Connection.send of <websockets.asyncio.client.ClientConnection object at 0x000001FFC9B0DD00>>
2025-06-09 15:15:15,595 - telephony_realtime_bridge - INFO - Audio buffer committed with 2 chunks (51200 bytes)
2025-06-09 15:15:15,595 - telephony_realtime_bridge - INFO - Audio buffer commit sent: {"type":"input_audio_buffer.commit","event_id":null}
2025-06-09 15:15:15,595 - telephony_realtime_bridge - INFO - No active response - creating new response immediately
2025-06-09 15:15:15,597 - telephony_realtime_bridge - INFO - Response creation triggered after audio buffer commit
2025-06-09 15:15:15,598 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.stopped
2025-06-09 15:15:15,599 - multi_turn_test - INFO - [MOCK] User stream stopped
2025-06-09 15:15:15,763 - telephony_realtime_bridge - INFO - Received OpenAI message type: input_audio_buffer.committed
2025-06-09 15:15:15,763 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:15,763 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:15,775 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-09 15:15:15,775 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_Bgf3pU46GspTA1cTgOnHr",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf3pRjumQ2sRnflk1EWA",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-09 15:15:15,775 - telephony_realtime_bridge - INFO - Response generation started: resp_Bgf3pRjumQ2sRnflk1EWA
2025-06-09 15:15:16,591 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-09 15:15:16,592 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_Bgf3pYyDDPSwkv7u43iUi",
  "object": "realtime.item",
  "type": "function_call",
  "status": "in_progress",
  "name": "call_intent",
  "call_id": "call_ZstM4B6GavLYM1c9",
  "arguments": ""
}
2025-06-09 15:15:16,592 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_Bgf3pYyDDPSwkv7u43iUi', 'object': 'realtime.item', 'type': 'function_call', 'status': 'in_progress', 'name': 'call_intent', 'call_id': 'call_ZstM4B6GavLYM1c9', 'arguments': ''}
2025-06-09 15:15:16,592 - telephony_realtime_bridge - INFO - Captured function call: call_intent with call_id: call_ZstM4B6GavLYM1c9
2025-06-09 15:15:16,592 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:16,592 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:16,596 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:16,596 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:16,596 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:16,596 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:16,600 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:16,600 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:16,600 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:16,600 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:16,600 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:16,600 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:16,604 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:16,605 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:16,606 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:16,606 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:16,606 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.done
2025-06-09 15:15:16,606 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.done to handler
2025-06-09 15:15:16,606 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-09 15:15:16,606 - telephony_realtime_bridge - INFO - Output item completed
2025-06-09 15:15:16,606 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-09 15:15:16,606 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_Bgf3pwgb21R6GS9AMFfUh",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf3pRjumQ2sRnflk1EWA",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_Bgf3pYyDDPSwkv7u43iUi",
        "object": "realtime.item",
        "type": "function_call",
        "status": "completed",
        "name": "call_intent",
        "call_id": "call_ZstM4B6GavLYM1c9",
        "arguments": "{\"intent\":\"card_replacement\"}"
      }
    ],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 643,
      "input_tokens": 625,
      "output_tokens": 18,
      "input_token_details": {
        "text_tokens": 580,
        "audio_tokens": 45,
        "cached_tokens": 512,
        "cached_tokens_details": {
          "text_tokens": 512,
          "audio_tokens": 0
        }
      },
      "output_token_details": {
        "text_tokens": 18,
        "audio_tokens": 0
      }
    },
    "metadata": null
  }
}
2025-06-09 15:15:16,606 - telephony_realtime_bridge - INFO - Response generation completed: resp_Bgf3pRjumQ2sRnflk1EWA
2025-06-09 15:15:16,612 - call_recorder - INFO - Function call logged: call_intent
2025-06-09 15:15:16,682 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:16,682 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:16,728 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-09 15:15:16,729 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_Bgf3qD3JQ21m2i0AIs87y",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf3quD5sqlx3nUcw35IT",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-09 15:15:16,730 - telephony_realtime_bridge - INFO - Response generation started: resp_Bgf3quD5sqlx3nUcw35IT
2025-06-09 15:15:17,158 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-09 15:15:17,158 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_Bgf3qst2xVN8RP6oqhEMh",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-09 15:15:17,158 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_Bgf3qst2xVN8RP6oqhEMh', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-09 15:15:17,158 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:17,158 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:17,181 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-09 15:15:17,181 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-09 15:15:17,181 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-09 15:15:17,181 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,185 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:17,186 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: Sure
2025-06-09 15:15:17,186 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,186 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:17,186 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-09 15:15:17,191 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,192 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 2
2025-06-09 15:15:17,193 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  I
2025-06-09 15:15:17,195 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,195 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:17,195 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  can
2025-06-09 15:15:17,203 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,211 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-09 15:15:17,213 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  assist
2025-06-09 15:15:17,289 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:17,289 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-09 15:15:17,291 - telephony_realtime_bridge - INFO - Started play stream: 5b4d907b-baf0-468e-b79d-9b70e9e4505d
2025-06-09 15:15:17,291 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-09 15:15:17,291 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-09 15:15:17,291 - multi_turn_test - INFO - [MOCK] Play stream started: 5b4d907b-baf0-468e-b79d-9b70e9e4505d
2025-06-09 15:15:17,291 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-09 15:15:17,291 - multi_turn_test - INFO - [MOCK] Collecting response audio...
2025-06-09 15:15:17,291 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:17,291 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-09 15:15:17,316 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:17,316 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-09 15:15:17,316 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-09 15:15:17,320 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-09 15:15:17,320 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:17,322 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-09 15:15:17,364 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,364 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:17,364 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-09 15:15:17,369 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:17,369 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:17,370 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:17,373 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:17,373 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:17,373 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,373 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:17,373 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:17,373 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  with
2025-06-09 15:15:17,376 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,378 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:17,378 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  that
2025-06-09 15:15:17,386 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,387 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:17,387 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-09 15:15:17,437 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:17,437 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:17,437 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:17,445 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:17,445 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:17,445 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:17,481 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:17,481 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:17,481 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:17,481 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:17,481 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:17,481 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:17,516 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,516 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-09 15:15:17,516 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Which
2025-06-09 15:15:17,523 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,524 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:17,525 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  type
2025-06-09 15:15:17,527 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,527 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:17,529 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  of
2025-06-09 15:15:17,532 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,532 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:17,532 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-09 15:15:17,599 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:17,599 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:17,599 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:17,599 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:17,599 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:17,599 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:17,708 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,708 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:17,708 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  do
2025-06-09 15:15:17,708 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:17,708 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 32000
2025-06-09 15:15:17,708 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 12000 -> 8000 samples, 500.0ms -> 500.0ms
2025-06-09 15:15:17,716 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 32000 bytes)
2025-06-09 15:15:17,716 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,716 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:17,716 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:17,716 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (32000 bytes base64)
2025-06-09 15:15:17,716 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-09 15:15:17,716 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,716 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:17,716 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  need
2025-06-09 15:15:17,716 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,716 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:17,724 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  to
2025-06-09 15:15:17,725 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,725 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:17,725 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  replace
2025-06-09 15:15:17,725 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,725 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:17,725 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-09 15:15:17,725 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,725 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:17,725 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  We
2025-06-09 15:15:17,732 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:17,732 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:17,732 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  have
2025-06-09 15:15:17,890 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:17,890 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 48000
2025-06-09 15:15:17,890 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 18000 -> 12000 samples, 750.0ms -> 750.0ms
2025-06-09 15:15:17,898 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 48000 bytes)
2025-06-09 15:15:17,898 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:17,898 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (48000 bytes base64)
2025-06-09 15:15:18,045 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:18,045 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:18,045 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:18,053 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:18,053 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:18,053 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:18,102 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,102 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:18,102 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  options
2025-06-09 15:15:18,111 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,111 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:18,111 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  for
2025-06-09 15:15:18,116 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,116 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:18,119 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Gold
2025-06-09 15:15:18,119 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,119 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:18,119 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-09 15:15:18,133 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,133 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:18,133 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-09 15:15:18,135 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,135 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-09 15:15:18,135 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Silver
2025-06-09 15:15:18,143 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,143 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:18,143 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-09 15:15:18,151 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,151 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:18,151 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-09 15:15:18,268 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:18,268 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:18,274 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:18,276 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:18,276 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:18,276 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:18,431 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:18,431 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:18,433 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:18,439 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:18,439 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:18,439 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:18,533 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,533 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:18,533 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  or
2025-06-09 15:15:18,533 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,538 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-09 15:15:18,538 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Basic
2025-06-09 15:15:18,538 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,538 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:18,538 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-09 15:15:18,550 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:18,550 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:18,550 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-09 15:15:18,634 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:18,634 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:18,634 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:18,637 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:18,637 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:18,645 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:18,786 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:18,786 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:18,794 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:18,802 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:18,802 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:18,802 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:18,941 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:18,941 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:18,941 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:18,950 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:18,952 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:18,952 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:18,982 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:18,982 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 50264
2025-06-09 15:15:18,982 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 18848 -> 12565 samples, 785.3ms -> 785.3ms
2025-06-09 15:15:18,990 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 50264 bytes)
2025-06-09 15:15:18,990 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-09 15:15:18,990 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:18,990 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-09 15:15:18,990 - telephony_realtime_bridge - INFO - Stopped play stream: 5b4d907b-baf0-468e-b79d-9b70e9e4505d
2025-06-09 15:15:18,990 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (50264 bytes base64)
2025-06-09 15:15:18,990 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-09 15:15:18,990 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-09 15:15:18,990 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): Sure, I can assist you with that. Which type of card do you need to replace? We have options for Gold card, Silver card, or Basic card.
2025-06-09 15:15:18,998 - multi_turn_test - INFO - [MOCK] Response collected: 15 chunks
2025-06-09 15:15:18,998 - call_recorder - INFO - Transcript added: [bot] Sure, I can assist you with that. Which type of ca...
2025-06-09 15:15:18,998 - multi_turn_test - INFO - [MOCK] Play stream stopped: 5b4d907b-baf0-468e-b79d-9b70e9e4505d
2025-06-09 15:15:18,998 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-09 15:15:18,998 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-09 15:15:18,998 - telephony_realtime_bridge - INFO - Content part completed
2025-06-09 15:15:18,998 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-09 15:15:18,998 - telephony_realtime_bridge - INFO - Output item completed
2025-06-09 15:15:18,998 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-09 15:15:18,998 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_Bgf3sYYRZoYeyRl3WTcc9",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf3quD5sqlx3nUcw35IT",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_Bgf3qst2xVN8RP6oqhEMh",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "Sure, I can assist you with that. Which type of card do you need to replace? We have options for Gold card, Silver card, or Basic card."
          }
        ]
      }
    ],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 952,
      "input_tokens": 719,
      "output_tokens": 233,
      "input_token_details": {
        "text_tokens": 674,
        "audio_tokens": 45,
        "cached_tokens": 0,
        "cached_tokens_details": {
          "text_tokens": 0,
          "audio_tokens": 0
        }
      },
      "output_token_details": {
        "text_tokens": 49,
        "audio_tokens": 184
      }
    },
    "metadata": null
  }
}
2025-06-09 15:15:18,998 - telephony_realtime_bridge - INFO - Response generation completed: resp_Bgf3quD5sqlx3nUcw35IT
2025-06-09 15:15:19,058 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-09 15:15:19,111 - multi_turn_test - INFO - [MOCK] Response received: 15 chunks
2025-06-09 15:15:19,111 - multi_turn_test - INFO - [MOCK] Turn 1: AI response received (15 chunks)
2025-06-09 15:15:19,111 - multi_turn_test - INFO - [MOCK] Saved audio: turn_01_response_0b135b79.wav (13.93s)
2025-06-09 15:15:19,111 - multi_turn_test - INFO - [MOCK] Waiting 2.0s before next turn...
2025-06-09 15:15:19,975 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.delta
2025-06-09 15:15:19,975 - telephony_realtime_bridge - DEBUG - Received input audio transcription delta: Hi, I need to replace my card.

2025-06-09 15:15:19,975 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.completed
2025-06-09 15:15:19,975 - telephony_realtime_bridge - INFO - Full user transcript (input audio): Hi, I need to replace my card.

2025-06-09 15:15:19,975 - call_recorder - INFO - Transcript added: [caller] Hi, I need to replace my card.
...
2025-06-09 15:15:19,975 - telephony_realtime_bridge - INFO - Input audio transcription completed
2025-06-09 15:15:21,120 - multi_turn_test - INFO - 
[MOCK] === Turn 2/5 ===
2025-06-09 15:15:21,123 - multi_turn_test - INFO - [MOCK] Sending: my_gold_card.wav
2025-06-09 15:15:21,125 - multi_turn_test - INFO - [MOCK] Loading audio: my_gold_card.wav
2025-06-09 15:15:21,125 - multi_turn_test - INFO -    Format: 1ch, 16bit, 24000Hz
2025-06-09 15:15:21,525 - multi_turn_test - INFO -    Resampling from 24000Hz to 16000Hz...
2025-06-09 15:15:21,554 - multi_turn_test - INFO -    Split into 2 chunks (~1.01s total)
2025-06-09 15:15:21,555 - multi_turn_test - INFO - [MOCK] Sending user audio: my_gold_card.wav (2 chunks)
2025-06-09 15:15:21,555 - telephony_realtime_bridge - INFO - Received telephony message: userStream.start
2025-06-09 15:15:21,558 - telephony_realtime_bridge - INFO - User stream start received: {'type': 'userStream.start', 'conversationId': '0b135b79-8451-4f58-af5a-b68b1bd2262a'}
2025-06-09 15:15:21,558 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.started
2025-06-09 15:15:21,558 - telephony_realtime_bridge - INFO - User stream started for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:21,559 - multi_turn_test - INFO - [MOCK] User stream started
2025-06-09 15:15:21,671 - multi_turn_test - DEBUG - [MOCK] Sent chunk 1/2
2025-06-09 15:15:21,671 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 42668 bytes
2025-06-09 15:15:21,671 - telephony_realtime_bridge - DEBUG - Processing audio chunk #1: 32000 -> 32000 bytes (~1000.0ms of audio). Total sent: 32000 bytes
2025-06-09 15:15:21,671 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 42668 bytes base64)
2025-06-09 15:15:21,702 - multi_turn_test - DEBUG - [MOCK] Sent chunk 2/2
2025-06-09 15:15:21,702 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 4268 bytes
2025-06-09 15:15:21,702 - telephony_realtime_bridge - DEBUG - Processing audio chunk #2: 3200 -> 3200 bytes (~100.0ms of audio). Total sent: 35200 bytes
2025-06-09 15:15:21,702 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 4268 bytes base64)
2025-06-09 15:15:21,730 - multi_turn_test - INFO - [MOCK] User audio sent successfully
2025-06-09 15:15:21,730 - telephony_realtime_bridge - INFO - Received telephony message: userStream.stop
2025-06-09 15:15:21,731 - multi_turn_test - INFO - [MOCK] Turn 2: User audio sent successfully
2025-06-09 15:15:21,731 - telephony_realtime_bridge - INFO - User stream stop received for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:21,731 - multi_turn_test - INFO - [MOCK] Waiting for LLM response...
2025-06-09 15:15:21,731 - telephony_realtime_bridge - INFO - Buffer state before commit: 2 chunks, 35200 bytes (~1100.0ms of audio)
2025-06-09 15:15:21,731 - telephony_realtime_bridge - INFO - realtime_websocket_object: <bound method Connection.send of <websockets.asyncio.client.ClientConnection object at 0x000001FFC9B0DD00>>
2025-06-09 15:15:21,735 - telephony_realtime_bridge - INFO - Audio buffer committed with 2 chunks (35200 bytes)
2025-06-09 15:15:21,735 - telephony_realtime_bridge - INFO - Audio buffer commit sent: {"type":"input_audio_buffer.commit","event_id":null}
2025-06-09 15:15:21,735 - telephony_realtime_bridge - INFO - No active response - creating new response immediately
2025-06-09 15:15:21,738 - telephony_realtime_bridge - INFO - Response creation triggered after audio buffer commit
2025-06-09 15:15:21,738 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.stopped
2025-06-09 15:15:21,738 - multi_turn_test - INFO - [MOCK] User stream stopped
2025-06-09 15:15:21,851 - telephony_realtime_bridge - INFO - Received OpenAI message type: input_audio_buffer.committed
2025-06-09 15:15:21,859 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:21,859 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:21,859 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-09 15:15:21,859 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_Bgf3v8tQa58qSds3FcnHo",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf3vwUskwqRYlOnimtqO",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-09 15:15:21,859 - telephony_realtime_bridge - INFO - Response generation started: resp_Bgf3vwUskwqRYlOnimtqO
2025-06-09 15:15:22,457 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-09 15:15:22,457 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_Bgf3v0m3AlbsNVZs6Qlfg",
  "object": "realtime.item",
  "type": "function_call",
  "status": "in_progress",
  "name": "replacement_reason",
  "call_id": "call_Cgg5Y31japZRnMDi",
  "arguments": ""
}
2025-06-09 15:15:22,457 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_Bgf3v0m3AlbsNVZs6Qlfg', 'object': 'realtime.item', 'type': 'function_call', 'status': 'in_progress', 'name': 'replacement_reason', 'call_id': 'call_Cgg5Y31japZRnMDi', 'arguments': ''}
2025-06-09 15:15:22,457 - telephony_realtime_bridge - INFO - Captured function call: replacement_reason with call_id: call_Cgg5Y31japZRnMDi
2025-06-09 15:15:22,460 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:22,461 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:22,461 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:22,461 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:22,461 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:22,461 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:22,465 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:22,465 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:22,465 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:22,465 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:22,465 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:22,465 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:22,465 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:22,465 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:22,465 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:22,465 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:22,479 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:22,479 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:22,506 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.done
2025-06-09 15:15:22,506 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.done to handler
2025-06-09 15:15:22,506 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-09 15:15:22,506 - telephony_realtime_bridge - INFO - Output item completed
2025-06-09 15:15:22,506 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-09 15:15:22,514 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_Bgf3vhOsmJt0RHEaMx3To",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf3vwUskwqRYlOnimtqO",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_Bgf3v0m3AlbsNVZs6Qlfg",
        "object": "realtime.item",
        "type": "function_call",
        "status": "completed",
        "name": "replacement_reason",
        "call_id": "call_Cgg5Y31japZRnMDi",
        "arguments": "{\"card_in_context\":\"Gold card\"}"
      }
    ],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 988,
      "input_tokens": 969,
      "output_tokens": 19,
      "input_token_details": {
        "text_tokens": 733,
        "audio_tokens": 236,
        "cached_tokens": 512,
        "cached_tokens_details": {
          "text_tokens": 512,
          "audio_tokens": 0
        }
      },
      "output_token_details": {
        "text_tokens": 19,
        "audio_tokens": 0
      }
    },
    "metadata": null
  }
}
2025-06-09 15:15:22,514 - telephony_realtime_bridge - INFO - Response generation completed: resp_Bgf3vwUskwqRYlOnimtqO
2025-06-09 15:15:22,547 - call_recorder - INFO - Function call logged: replacement_reason
2025-06-09 15:15:22,547 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-09 15:15:22,612 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:22,620 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:22,644 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-09 15:15:22,644 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_Bgf3vBLXUDzQqox3eFLZo",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf3v2FPTiYFbWGiA3MIf",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-09 15:15:22,647 - telephony_realtime_bridge - INFO - Response generation started: resp_Bgf3v2FPTiYFbWGiA3MIf
2025-06-09 15:15:23,272 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-09 15:15:23,274 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_Bgf3vUJdQ6gKy644c0MNa",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-09 15:15:23,274 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_Bgf3vUJdQ6gKy644c0MNa', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-09 15:15:23,276 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:23,276 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:23,276 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-09 15:15:23,278 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-09 15:15:23,278 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-09 15:15:23,280 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,280 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:23,280 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: Got
2025-06-09 15:15:23,280 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,280 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:23,280 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  it
2025-06-09 15:15:23,280 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,280 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:23,280 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-09 15:15:23,286 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,286 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-09 15:15:23,286 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Could
2025-06-09 15:15:23,286 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.delta
2025-06-09 15:15:23,286 - telephony_realtime_bridge - DEBUG - Received input audio transcription delta: It's my gold card.

2025-06-09 15:15:23,286 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.completed
2025-06-09 15:15:23,292 - telephony_realtime_bridge - INFO - Full user transcript (input audio): It's my gold card.

2025-06-09 15:15:23,292 - call_recorder - INFO - Transcript added: [caller] It's my gold card.
...
2025-06-09 15:15:23,292 - telephony_realtime_bridge - INFO - Input audio transcription completed
2025-06-09 15:15:23,292 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:23,294 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-09 15:15:23,294 - telephony_realtime_bridge - INFO - Started play stream: 5a6a6e11-d5e6-455d-bc7a-cee11531cf46
2025-06-09 15:15:23,294 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-09 15:15:23,294 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-09 15:15:23,294 - multi_turn_test - INFO - [MOCK] Play stream started: 5a6a6e11-d5e6-455d-bc7a-cee11531cf46
2025-06-09 15:15:23,294 - multi_turn_test - INFO - [MOCK] Collecting response audio...
2025-06-09 15:15:23,294 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-09 15:15:23,294 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:23,294 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-09 15:15:23,329 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:23,329 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-09 15:15:23,329 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-09 15:15:23,335 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-09 15:15:23,335 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:23,336 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-09 15:15:23,351 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:23,351 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:23,357 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:23,359 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:23,359 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:23,359 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,359 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:23,359 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:23,359 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-09 15:15:23,363 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,363 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-09 15:15:23,364 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  please
2025-06-09 15:15:23,364 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,364 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:23,364 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  tell
2025-06-09 15:15:23,368 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,368 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:23,369 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  me
2025-06-09 15:15:23,403 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:23,403 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:23,403 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:23,415 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:23,415 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:23,415 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:23,439 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:23,441 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:23,441 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:23,443 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:23,445 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:23,446 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:23,480 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,480 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:23,480 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  the
2025-06-09 15:15:23,487 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,491 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-09 15:15:23,491 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  reason
2025-06-09 15:15:23,498 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,498 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:23,500 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  for
2025-06-09 15:15:23,558 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:23,558 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:23,558 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:23,558 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:23,564 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:23,564 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:23,641 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:23,647 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 32000
2025-06-09 15:15:23,648 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 12000 -> 8000 samples, 500.0ms -> 500.0ms
2025-06-09 15:15:23,651 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 32000 bytes)
2025-06-09 15:15:23,651 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,651 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:23,651 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (32000 bytes base64)
2025-06-09 15:15:23,651 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 10
2025-06-09 15:15:23,655 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  replacing
2025-06-09 15:15:23,655 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,655 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:23,655 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  your
2025-06-09 15:15:23,659 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,659 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:23,660 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Gold
2025-06-09 15:15:23,663 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,663 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:23,663 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-09 15:15:23,675 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,676 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:23,677 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-09 15:15:23,683 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,684 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:23,684 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Is
2025-06-09 15:15:23,884 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:23,884 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 48000
2025-06-09 15:15:23,891 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 18000 -> 12000 samples, 750.0ms -> 750.0ms
2025-06-09 15:15:23,896 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 48000 bytes)
2025-06-09 15:15:23,896 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:23,896 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (48000 bytes base64)
2025-06-09 15:15:23,940 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,940 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:23,942 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  it
2025-06-09 15:15:23,951 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,955 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:23,955 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  lost
2025-06-09 15:15:23,956 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,959 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:23,959 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-09 15:15:23,963 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,963 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:23,963 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  damaged
2025-06-09 15:15:23,968 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,968 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:23,971 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-09 15:15:23,975 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,975 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-09 15:15:23,975 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  stolen
2025-06-09 15:15:23,990 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:23,991 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:23,991 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-09 15:15:24,086 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:24,089 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:24,091 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:24,092 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:24,097 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:24,097 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:24,296 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:24,296 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:24,300 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:24,311 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:24,312 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:24,313 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:24,381 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:24,381 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:24,381 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:24,392 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:24,393 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:24,393 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:24,393 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:24,393 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:24,393 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  or
2025-06-09 15:15:24,395 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:24,395 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:24,397 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  another
2025-06-09 15:15:24,397 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:24,399 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-09 15:15:24,399 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  reason
2025-06-09 15:15:24,399 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:24,401 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:24,401 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-09 15:15:24,705 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:24,707 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:24,707 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:24,717 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:24,717 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:24,719 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:24,755 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:24,755 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:24,758 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:24,767 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:24,767 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:24,768 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:24,842 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:24,842 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 66264
2025-06-09 15:15:24,842 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24848 -> 16565 samples, 1035.3ms -> 1035.3ms
2025-06-09 15:15:24,849 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 66264 bytes)
2025-06-09 15:15:24,849 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:24,849 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-09 15:15:24,849 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (66264 bytes base64)
2025-06-09 15:15:24,849 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-09 15:15:24,857 - telephony_realtime_bridge - INFO - Stopped play stream: 5a6a6e11-d5e6-455d-bc7a-cee11531cf46
2025-06-09 15:15:24,857 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-09 15:15:24,857 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-09 15:15:24,857 - multi_turn_test - INFO - [MOCK] Response collected: 14 chunks
2025-06-09 15:15:24,857 - multi_turn_test - INFO - [MOCK] Play stream stopped: 5a6a6e11-d5e6-455d-bc7a-cee11531cf46
2025-06-09 15:15:24,857 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): Got it. Could you please tell me the reason for replacing your Gold card? Is it lost, damaged, stolen, or another reason?
2025-06-09 15:15:24,857 - call_recorder - INFO - Transcript added: [bot] Got it. Could you please tell me the reason for re...
2025-06-09 15:15:24,857 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-09 15:15:24,857 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-09 15:15:24,863 - telephony_realtime_bridge - INFO - Content part completed
2025-06-09 15:15:24,863 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-09 15:15:24,865 - telephony_realtime_bridge - INFO - Output item completed
2025-06-09 15:15:24,865 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-09 15:15:24,865 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_Bgf3y3iEgUgBJwHYvf8QS",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf3v2FPTiYFbWGiA3MIf",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_Bgf3vUJdQ6gKy644c0MNa",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "Got it. Could you please tell me the reason for replacing your Gold card? Is it lost, damaged, stolen, or another reason?"
          }
        ]
      }
    ],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 1346,
      "input_tokens": 1133,
      "output_tokens": 213,
      "input_token_details": {
        "text_tokens": 897,
        "audio_tokens": 236,
        "cached_tokens": 896,
        "cached_tokens_details": {
          "text_tokens": 704,
          "audio_tokens": 192
        }
      },
      "output_token_details": {
        "text_tokens": 44,
        "audio_tokens": 169
      }
    },
    "metadata": null
  }
}
2025-06-09 15:15:24,865 - telephony_realtime_bridge - INFO - Response generation completed: resp_Bgf3v2FPTiYFbWGiA3MIf
2025-06-09 15:15:24,891 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-09 15:15:24,942 - multi_turn_test - INFO - [MOCK] Response received: 14 chunks
2025-06-09 15:15:24,943 - multi_turn_test - INFO - [MOCK] Turn 2: AI response received (14 chunks)
2025-06-09 15:15:24,944 - multi_turn_test - INFO - [MOCK] Saved audio: turn_02_response_0b135b79.wav (12.80s)
2025-06-09 15:15:24,944 - multi_turn_test - INFO - [MOCK] Waiting 2.0s before next turn...
2025-06-09 15:15:26,953 - multi_turn_test - INFO - 
[MOCK] === Turn 3/5 ===
2025-06-09 15:15:26,953 - multi_turn_test - INFO - [MOCK] Sending: i_lost_it.wav
2025-06-09 15:15:26,953 - multi_turn_test - INFO - [MOCK] Loading audio: i_lost_it.wav
2025-06-09 15:15:26,953 - multi_turn_test - INFO -    Format: 1ch, 16bit, 24000Hz
2025-06-09 15:15:27,358 - multi_turn_test - INFO -    Resampling from 24000Hz to 16000Hz...
2025-06-09 15:15:27,385 - multi_turn_test - INFO -    Split into 1 chunks (~0.61s total)
2025-06-09 15:15:27,386 - multi_turn_test - INFO - [MOCK] Sending user audio: i_lost_it.wav (1 chunks)
2025-06-09 15:15:27,386 - telephony_realtime_bridge - INFO - Received telephony message: userStream.start
2025-06-09 15:15:27,386 - telephony_realtime_bridge - INFO - User stream start received: {'type': 'userStream.start', 'conversationId': '0b135b79-8451-4f58-af5a-b68b1bd2262a'}
2025-06-09 15:15:27,386 - telephony_realtime_bridge - INFO - User stream started for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:27,386 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.started
2025-06-09 15:15:27,391 - multi_turn_test - INFO - [MOCK] User stream started
2025-06-09 15:15:27,484 - multi_turn_test - DEBUG - [MOCK] Sent chunk 1/1
2025-06-09 15:15:27,490 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 26136 bytes
2025-06-09 15:15:27,491 - telephony_realtime_bridge - DEBUG - Processing audio chunk #1: 19600 -> 19600 bytes (~612.5ms of audio). Total sent: 19600 bytes
2025-06-09 15:15:27,492 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 26136 bytes base64)
2025-06-09 15:15:27,518 - multi_turn_test - INFO - [MOCK] User audio sent successfully
2025-06-09 15:15:27,519 - multi_turn_test - INFO - [MOCK] Turn 3: User audio sent successfully
2025-06-09 15:15:27,518 - telephony_realtime_bridge - INFO - Received telephony message: userStream.stop
2025-06-09 15:15:27,519 - multi_turn_test - INFO - [MOCK] Waiting for LLM response...
2025-06-09 15:15:27,519 - telephony_realtime_bridge - INFO - User stream stop received for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:27,519 - telephony_realtime_bridge - INFO - Buffer state before commit: 1 chunks, 19600 bytes (~612.5ms of audio)
2025-06-09 15:15:27,521 - telephony_realtime_bridge - INFO - realtime_websocket_object: <bound method Connection.send of <websockets.asyncio.client.ClientConnection object at 0x000001FFC9B0DD00>>
2025-06-09 15:15:27,521 - telephony_realtime_bridge - INFO - Audio buffer committed with 1 chunks (19600 bytes)
2025-06-09 15:15:27,523 - telephony_realtime_bridge - INFO - Audio buffer commit sent: {"type":"input_audio_buffer.commit","event_id":null}
2025-06-09 15:15:27,524 - telephony_realtime_bridge - INFO - No active response - creating new response immediately
2025-06-09 15:15:27,525 - telephony_realtime_bridge - INFO - Response creation triggered after audio buffer commit
2025-06-09 15:15:27,526 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.stopped
2025-06-09 15:15:27,526 - multi_turn_test - INFO - [MOCK] User stream stopped
2025-06-09 15:15:27,625 - telephony_realtime_bridge - INFO - Received OpenAI message type: input_audio_buffer.committed
2025-06-09 15:15:27,625 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:27,625 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:27,627 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.delta
2025-06-09 15:15:27,627 - telephony_realtime_bridge - DEBUG - Received input audio transcription delta: 
2025-06-09 15:15:27,627 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.completed
2025-06-09 15:15:27,627 - telephony_realtime_bridge - INFO - Full user transcript (input audio): 
2025-06-09 15:15:27,627 - telephony_realtime_bridge - INFO - Input audio transcription completed
2025-06-09 15:15:27,627 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-09 15:15:27,627 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_Bgf40AYq0TV1NnoaTCQMr",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf40tRUBbyUGqhNlaVdt",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-09 15:15:27,627 - telephony_realtime_bridge - INFO - Response generation started: resp_Bgf40tRUBbyUGqhNlaVdt
2025-06-09 15:15:28,392 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-09 15:15:28,392 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_Bgf40l6EZTAoIxrpGd3Dn",
  "object": "realtime.item",
  "type": "function_call",
  "status": "in_progress",
  "name": "replacement_reason",
  "call_id": "call_WMhIro5rnxRU6eFd",
  "arguments": ""
}
2025-06-09 15:15:28,392 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_Bgf40l6EZTAoIxrpGd3Dn', 'object': 'realtime.item', 'type': 'function_call', 'status': 'in_progress', 'name': 'replacement_reason', 'call_id': 'call_WMhIro5rnxRU6eFd', 'arguments': ''}
2025-06-09 15:15:28,395 - telephony_realtime_bridge - INFO - Captured function call: replacement_reason with call_id: call_WMhIro5rnxRU6eFd
2025-06-09 15:15:28,395 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:28,395 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:28,397 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,397 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,399 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,399 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,399 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,401 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,401 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,402 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,403 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,403 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,405 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,405 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,407 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,408 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,410 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,411 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,411 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,411 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,414 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,414 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,416 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,417 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,417 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:28,419 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:28,434 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.done
2025-06-09 15:15:28,435 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.done to handler
2025-06-09 15:15:28,435 - call_recorder - INFO - Function call logged: replacement_reason
2025-06-09 15:15:28,436 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-09 15:15:28,436 - telephony_realtime_bridge - INFO - Output item completed
2025-06-09 15:15:28,439 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-09 15:15:28,439 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_Bgf41APpg6V5nUupYw4AI",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf40tRUBbyUGqhNlaVdt",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_Bgf40l6EZTAoIxrpGd3Dn",
        "object": "realtime.item",
        "type": "function_call",
        "status": "completed",
        "name": "replacement_reason",
        "call_id": "call_WMhIro5rnxRU6eFd",
        "arguments": "{\"card_in_context\":\"Gold card\",\"reason\":\"Lost\"}"
      }
    ],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 1383,
      "input_tokens": 1360,
      "output_tokens": 23,
      "input_token_details": {
        "text_tokens": 951,
        "audio_tokens": 409,
        "cached_tokens": 1280,
        "cached_tokens_details": {
          "text_tokens": 896,
          "audio_tokens": 384
        }
      },
      "output_token_details": {
        "text_tokens": 23,
        "audio_tokens": 0
      }
    },
    "metadata": null
  }
}
2025-06-09 15:15:28,441 - telephony_realtime_bridge - INFO - Response generation completed: resp_Bgf40tRUBbyUGqhNlaVdt
2025-06-09 15:15:28,455 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-09 15:15:28,512 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:28,513 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:28,515 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-09 15:15:28,515 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_Bgf41bfHB49n0IrRzwPqH",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf41vH8kwUae02YuZ9ob",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-09 15:15:28,517 - telephony_realtime_bridge - INFO - Response generation started: resp_Bgf41vH8kwUae02YuZ9ob
2025-06-09 15:15:29,211 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-09 15:15:29,212 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_Bgf419acAhsL1bTa6d7xH",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-09 15:15:29,213 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_Bgf419acAhsL1bTa6d7xH', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-09 15:15:29,213 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:29,213 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:29,213 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-09 15:15:29,214 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-09 15:15:29,214 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-09 15:15:29,214 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,214 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:29,214 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: Thank
2025-06-09 15:15:29,218 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,218 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:29,218 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-09 15:15:29,218 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,220 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:29,220 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  for
2025-06-09 15:15:29,220 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,222 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 10
2025-06-09 15:15:29,222 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  informing
2025-06-09 15:15:29,288 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:29,288 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-09 15:15:29,288 - telephony_realtime_bridge - INFO - Started play stream: e55b5d66-618c-4c09-bb78-209d9099d5d0
2025-06-09 15:15:29,301 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-09 15:15:29,301 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-09 15:15:29,301 - multi_turn_test - INFO - [MOCK] Play stream started: e55b5d66-618c-4c09-bb78-209d9099d5d0
2025-06-09 15:15:29,301 - multi_turn_test - INFO - [MOCK] Collecting response audio...
2025-06-09 15:15:29,301 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-09 15:15:29,301 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:29,306 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-09 15:15:29,339 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:29,339 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-09 15:15:29,343 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-09 15:15:29,343 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-09 15:15:29,343 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:29,347 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-09 15:15:29,382 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:29,382 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:29,388 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:29,391 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:29,391 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:29,391 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,391 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:29,391 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:29,391 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  me
2025-06-09 15:15:29,394 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,394 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:29,395 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-09 15:15:29,396 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,396 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:29,396 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Now
2025-06-09 15:15:29,398 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,398 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:29,398 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-09 15:15:29,437 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:29,437 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:29,440 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:29,440 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:29,440 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:29,440 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:29,472 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:29,478 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:29,478 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:29,480 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:29,482 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:29,484 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:29,515 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,515 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-09 15:15:29,524 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  let's
2025-06-09 15:15:29,525 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,525 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:29,525 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  confirm
2025-06-09 15:15:29,580 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:29,580 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:29,580 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:29,588 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:29,588 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:29,591 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:29,665 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:29,665 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 32000
2025-06-09 15:15:29,669 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 12000 -> 8000 samples, 500.0ms -> 500.0ms
2025-06-09 15:15:29,673 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 32000 bytes)
2025-06-09 15:15:29,676 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:29,676 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,676 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (32000 bytes base64)
2025-06-09 15:15:29,676 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:29,676 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  the
2025-06-09 15:15:29,676 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,676 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:29,680 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  address
2025-06-09 15:15:29,682 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,682 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:29,682 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  for
2025-06-09 15:15:29,692 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,693 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:29,694 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  your
2025-06-09 15:15:29,697 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,697 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:29,697 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-09 15:15:29,697 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,697 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 9
2025-06-09 15:15:29,705 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  delivery
2025-06-09 15:15:29,705 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,705 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:29,705 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-09 15:15:29,931 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:29,931 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 48000
2025-06-09 15:15:29,931 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 18000 -> 12000 samples, 750.0ms -> 750.0ms
2025-06-09 15:15:29,941 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 48000 bytes)
2025-06-09 15:15:29,941 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:29,941 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (48000 bytes base64)
2025-06-09 15:15:29,968 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,970 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:29,971 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Is
2025-06-09 15:15:29,976 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,977 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:29,977 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  the
2025-06-09 15:15:29,988 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,988 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:29,988 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  address
2025-06-09 15:15:29,988 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:29,994 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:29,994 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  we
2025-06-09 15:15:30,003 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,003 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:30,003 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  have
2025-06-09 15:15:30,003 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,003 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:30,003 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  on
2025-06-09 15:15:30,097 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:30,097 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:30,097 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:30,097 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:30,097 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:30,107 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:30,338 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:30,338 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:30,338 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:30,350 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:30,352 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:30,352 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:30,390 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:30,391 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:30,391 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:30,398 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:30,398 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,398 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:30,406 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:30,406 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:30,406 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  file
2025-06-09 15:15:30,406 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,406 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:30,406 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  the
2025-06-09 15:15:30,406 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,406 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:30,406 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  correct
2025-06-09 15:15:30,413 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,413 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:30,415 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  one
2025-06-09 15:15:30,416 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,416 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:30,416 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-09 15:15:30,418 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,418 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:30,418 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  or
2025-06-09 15:15:30,422 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,427 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-09 15:15:30,427 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  would
2025-06-09 15:15:30,430 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,430 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:30,430 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-09 15:15:30,439 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,439 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:30,439 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  like
2025-06-09 15:15:30,750 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:30,751 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:30,752 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:30,757 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:30,758 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:30,759 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:30,785 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:30,785 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:30,791 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:30,798 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:30,798 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:30,798 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:30,825 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,828 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:30,828 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  to
2025-06-09 15:15:30,829 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,829 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:30,830 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  provide
2025-06-09 15:15:30,832 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,832 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 2
2025-06-09 15:15:30,832 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  a
2025-06-09 15:15:30,841 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,841 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 10
2025-06-09 15:15:30,841 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  different
2025-06-09 15:15:30,852 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,857 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:30,858 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  address
2025-06-09 15:15:30,858 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:30,858 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:30,858 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-09 15:15:31,058 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:31,058 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:31,060 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:31,068 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:31,071 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:31,071 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:31,171 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:31,171 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:31,171 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:31,175 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:31,175 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:31,183 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:31,361 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:31,361 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 95064
2025-06-09 15:15:31,361 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 35648 -> 23765 samples, 1485.3ms -> 1485.3ms
2025-06-09 15:15:31,377 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 95064 bytes)
2025-06-09 15:15:31,377 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-09 15:15:31,377 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-09 15:15:31,377 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:31,377 - telephony_realtime_bridge - INFO - Stopped play stream: e55b5d66-618c-4c09-bb78-209d9099d5d0
2025-06-09 15:15:31,377 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (95064 bytes base64)
2025-06-09 15:15:31,380 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-09 15:15:31,381 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): Thank you for informing me. Now, let's confirm the address for your card delivery. Is the address we have on file the correct one, or would you like to provide a different address?
2025-06-09 15:15:31,381 - call_recorder - INFO - Transcript added: [bot] Thank you for informing me. Now, let's confirm the...
2025-06-09 15:15:31,381 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-09 15:15:31,384 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-09 15:15:31,384 - telephony_realtime_bridge - INFO - Content part completed
2025-06-09 15:15:31,384 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-09 15:15:31,384 - telephony_realtime_bridge - INFO - Output item completed
2025-06-09 15:15:31,384 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-09 15:15:31,384 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_Bgf44rQ4S9RsYnZGEHgHY",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf41vH8kwUae02YuZ9ob",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_Bgf419acAhsL1bTa6d7xH",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "Thank you for informing me. Now, let's confirm the address for your card delivery. Is the address we have on file the correct one, or would you like to provide a different address?"
          }
        ]
      }
    ],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 1805,
      "input_tokens": 1531,
      "output_tokens": 274,
      "input_token_details": {
        "text_tokens": 1122,
        "audio_tokens": 409,
        "cached_tokens": 0,
        "cached_tokens_details": {
          "text_tokens": 0,
          "audio_tokens": 0
        }
      },
      "output_token_details": {
        "text_tokens": 56,
        "audio_tokens": 218
      }
    },
    "metadata": null
  }
}
2025-06-09 15:15:31,384 - telephony_realtime_bridge - INFO - Response generation completed: resp_Bgf41vH8kwUae02YuZ9ob
2025-06-09 15:15:31,384 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-09 15:15:31,391 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-09 15:15:31,392 - multi_turn_test - INFO - [MOCK] Response collected: 16 chunks
2025-06-09 15:15:31,393 - multi_turn_test - INFO - [MOCK] Play stream stopped: e55b5d66-618c-4c09-bb78-209d9099d5d0
2025-06-09 15:15:31,484 - multi_turn_test - INFO - [MOCK] Response received: 16 chunks
2025-06-09 15:15:31,484 - multi_turn_test - INFO - [MOCK] Turn 3: AI response received (16 chunks)
2025-06-09 15:15:31,484 - multi_turn_test - INFO - [MOCK] Saved audio: turn_03_response_0b135b79.wav (16.48s)
2025-06-09 15:15:31,484 - multi_turn_test - INFO - [MOCK] Waiting 2.0s before next turn...
2025-06-09 15:15:33,498 - multi_turn_test - INFO - 
[MOCK] === Turn 4/5 ===
2025-06-09 15:15:33,498 - multi_turn_test - INFO - [MOCK] Sending: yes_that_address.wav
2025-06-09 15:15:33,498 - multi_turn_test - INFO - [MOCK] Loading audio: yes_that_address.wav
2025-06-09 15:15:33,498 - multi_turn_test - INFO -    Format: 1ch, 16bit, 24000Hz
2025-06-09 15:15:33,910 - multi_turn_test - INFO -    Resampling from 24000Hz to 16000Hz...
2025-06-09 15:15:33,936 - multi_turn_test - INFO -    Split into 2 chunks (~1.54s total)
2025-06-09 15:15:33,939 - multi_turn_test - INFO - [MOCK] Sending user audio: yes_that_address.wav (2 chunks)
2025-06-09 15:15:33,939 - telephony_realtime_bridge - INFO - Received telephony message: userStream.start
2025-06-09 15:15:33,941 - telephony_realtime_bridge - INFO - User stream start received: {'type': 'userStream.start', 'conversationId': '0b135b79-8451-4f58-af5a-b68b1bd2262a'}
2025-06-09 15:15:33,941 - telephony_realtime_bridge - INFO - User stream started for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:33,941 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.started
2025-06-09 15:15:33,944 - multi_turn_test - INFO - [MOCK] User stream started
2025-06-09 15:15:34,059 - multi_turn_test - DEBUG - [MOCK] Sent chunk 1/2
2025-06-09 15:15:34,059 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 42668 bytes
2025-06-09 15:15:34,059 - telephony_realtime_bridge - DEBUG - Processing audio chunk #1: 32000 -> 32000 bytes (~1000.0ms of audio). Total sent: 32000 bytes
2025-06-09 15:15:34,065 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 42668 bytes base64)
2025-06-09 15:15:34,082 - multi_turn_test - DEBUG - [MOCK] Sent chunk 2/2
2025-06-09 15:15:34,082 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 22936 bytes
2025-06-09 15:15:34,082 - telephony_realtime_bridge - DEBUG - Processing audio chunk #2: 17200 -> 17200 bytes (~537.5ms of audio). Total sent: 49200 bytes
2025-06-09 15:15:34,082 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 22936 bytes base64)
2025-06-09 15:15:34,118 - telephony_realtime_bridge - INFO - Received telephony message: userStream.stop
2025-06-09 15:15:34,118 - multi_turn_test - INFO - [MOCK] User audio sent successfully
2025-06-09 15:15:34,118 - multi_turn_test - INFO - [MOCK] Turn 4: User audio sent successfully
2025-06-09 15:15:34,118 - telephony_realtime_bridge - INFO - User stream stop received for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:34,118 - multi_turn_test - INFO - [MOCK] Waiting for LLM response...
2025-06-09 15:15:34,118 - telephony_realtime_bridge - INFO - Buffer state before commit: 2 chunks, 49200 bytes (~1537.5ms of audio)
2025-06-09 15:15:34,118 - telephony_realtime_bridge - INFO - realtime_websocket_object: <bound method Connection.send of <websockets.asyncio.client.ClientConnection object at 0x000001FFC9B0DD00>>
2025-06-09 15:15:34,118 - telephony_realtime_bridge - INFO - Audio buffer committed with 2 chunks (49200 bytes)
2025-06-09 15:15:34,118 - telephony_realtime_bridge - INFO - Audio buffer commit sent: {"type":"input_audio_buffer.commit","event_id":null}
2025-06-09 15:15:34,118 - telephony_realtime_bridge - INFO - No active response - creating new response immediately
2025-06-09 15:15:34,118 - telephony_realtime_bridge - INFO - Response creation triggered after audio buffer commit
2025-06-09 15:15:34,125 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.stopped
2025-06-09 15:15:34,126 - multi_turn_test - INFO - [MOCK] User stream stopped
2025-06-09 15:15:34,249 - telephony_realtime_bridge - INFO - Received OpenAI message type: input_audio_buffer.committed
2025-06-09 15:15:34,257 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:34,259 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:34,260 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-09 15:15:34,260 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_Bgf47qk5qpvqPAk6eyiar",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf47QOvuyw5hXwz59KYW",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-09 15:15:34,261 - telephony_realtime_bridge - INFO - Response generation started: resp_Bgf47QOvuyw5hXwz59KYW
2025-06-09 15:15:34,767 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-09 15:15:34,770 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_Bgf47PzJAQpc816t7tPI4",
  "object": "realtime.item",
  "type": "function_call",
  "status": "in_progress",
  "name": "confirm_address",
  "call_id": "call_US0ZCSSTkqUgHvZt",
  "arguments": ""
}
2025-06-09 15:15:34,772 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_Bgf47PzJAQpc816t7tPI4', 'object': 'realtime.item', 'type': 'function_call', 'status': 'in_progress', 'name': 'confirm_address', 'call_id': 'call_US0ZCSSTkqUgHvZt', 'arguments': ''}
2025-06-09 15:15:34,774 - telephony_realtime_bridge - INFO - Captured function call: confirm_address with call_id: call_US0ZCSSTkqUgHvZt
2025-06-09 15:15:34,775 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:34,775 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:34,776 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,777 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,778 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,779 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,779 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,780 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,787 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,788 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,791 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,791 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,806 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,807 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,818 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,819 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,821 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,821 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,840 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,841 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,842 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,842 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,846 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,847 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,858 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,859 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,862 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,863 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,873 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:34,874 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:34,896 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.done
2025-06-09 15:15:34,897 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.done to handler
2025-06-09 15:15:34,897 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-09 15:15:34,898 - telephony_realtime_bridge - INFO - Output item completed
2025-06-09 15:15:34,898 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-09 15:15:34,898 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_Bgf48GS9fLcb6eH2GapN9",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf47QOvuyw5hXwz59KYW",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_Bgf47PzJAQpc816t7tPI4",
        "object": "realtime.item",
        "type": "function_call",
        "status": "completed",
        "name": "confirm_address",
        "call_id": "call_US0ZCSSTkqUgHvZt",
        "arguments": "{\"card_in_context\":\"Gold card\",\"address_on_file\":\"Yes\"}"
      }
    ],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 1849,
      "input_tokens": 1825,
      "output_tokens": 24,
      "input_token_details": {
        "text_tokens": 1188,
        "audio_tokens": 637,
        "cached_tokens": 896,
        "cached_tokens_details": {
          "text_tokens": 704,
          "audio_tokens": 192
        }
      },
      "output_token_details": {
        "text_tokens": 24,
        "audio_tokens": 0
      }
    },
    "metadata": null
  }
}
2025-06-09 15:15:34,900 - telephony_realtime_bridge - INFO - Response generation completed: resp_Bgf47QOvuyw5hXwz59KYW
2025-06-09 15:15:34,900 - call_recorder - INFO - Function call logged: confirm_address
2025-06-09 15:15:34,937 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-09 15:15:34,972 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:34,973 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:35,021 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-09 15:15:35,022 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_Bgf48fqu5lSymtw6FcqlP",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf485i5iczfTJEVWIFCf",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-09 15:15:35,023 - telephony_realtime_bridge - INFO - Response generation started: resp_Bgf485i5iczfTJEVWIFCf
2025-06-09 15:15:35,457 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-09 15:15:35,458 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_Bgf48MC7oX4EDdvEF02pw",
  "object": "realtime.item",
  "type": "function_call",
  "status": "in_progress",
  "name": "start_card_replacement",
  "call_id": "call_aAlscfU9T30xq0mC",
  "arguments": ""
}
2025-06-09 15:15:35,458 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_Bgf48MC7oX4EDdvEF02pw', 'object': 'realtime.item', 'type': 'function_call', 'status': 'in_progress', 'name': 'start_card_replacement', 'call_id': 'call_aAlscfU9T30xq0mC', 'arguments': ''}
2025-06-09 15:15:35,459 - telephony_realtime_bridge - INFO - Captured function call: start_card_replacement with call_id: call_aAlscfU9T30xq0mC
2025-06-09 15:15:35,459 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:35,459 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:35,460 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,460 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,460 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,461 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,461 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,461 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,461 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,462 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,462 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,462 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,464 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.delta
2025-06-09 15:15:35,464 - telephony_realtime_bridge - DEBUG - Received input audio transcription delta: Yes, send it to that address.

2025-06-09 15:15:35,464 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.completed
2025-06-09 15:15:35,465 - telephony_realtime_bridge - INFO - Full user transcript (input audio): Yes, send it to that address.

2025-06-09 15:15:35,465 - call_recorder - INFO - Transcript added: [caller] Yes, send it to that address.
...
2025-06-09 15:15:35,466 - telephony_realtime_bridge - INFO - Input audio transcription completed
2025-06-09 15:15:35,466 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,466 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,466 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,467 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,467 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,468 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,468 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,468 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,469 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,469 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,470 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,470 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,470 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,470 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,471 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,471 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,471 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.delta
2025-06-09 15:15:35,471 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.delta to handler
2025-06-09 15:15:35,506 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.function_call_arguments.done
2025-06-09 15:15:35,507 - telephony_realtime_bridge - INFO - ðŸŽ¯ Routing response.function_call_arguments.done to handler
2025-06-09 15:15:35,508 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-09 15:15:35,508 - telephony_realtime_bridge - INFO - Output item completed
2025-06-09 15:15:35,508 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-09 15:15:35,508 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_Bgf48c5Ieyrkd2fPerJTw",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf485i5iczfTJEVWIFCf",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_Bgf48MC7oX4EDdvEF02pw",
        "object": "realtime.item",
        "type": "function_call",
        "status": "completed",
        "name": "start_card_replacement",
        "call_id": "call_aAlscfU9T30xq0mC",
        "arguments": "{\"address_in_context\":\"Yes\",\"card_in_context\":\"Gold card\"}"
      }
    ],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 2004,
      "input_tokens": 1978,
      "output_tokens": 26,
      "input_token_details": {
        "text_tokens": 1341,
        "audio_tokens": 637,
        "cached_tokens": 1728,
        "cached_tokens_details": {
          "text_tokens": 1152,
          "audio_tokens": 576
        }
      },
      "output_token_details": {
        "text_tokens": 26,
        "audio_tokens": 0
      }
    },
    "metadata": null
  }
}
2025-06-09 15:15:35,509 - telephony_realtime_bridge - INFO - Response generation completed: resp_Bgf485i5iczfTJEVWIFCf
2025-06-09 15:15:35,509 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-09 15:15:35,509 - call_recorder - INFO - Function call logged: start_card_replacement
2025-06-09 15:15:35,589 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:35,589 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:35,671 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-09 15:15:35,671 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_Bgf48WnmjijzFPGr55K78",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf48ob3rU7QWzVL4xmqc",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-09 15:15:35,673 - telephony_realtime_bridge - INFO - Response generation started: resp_Bgf48ob3rU7QWzVL4xmqc
2025-06-09 15:15:36,878 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-09 15:15:36,878 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_Bgf48MRwiozUIJlqHf1yv",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-09 15:15:36,878 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_Bgf48MRwiozUIJlqHf1yv', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-09 15:15:36,894 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:36,895 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:36,895 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-09 15:15:36,898 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-09 15:15:36,898 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-09 15:15:36,902 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:36,902 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:36,903 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: Great
2025-06-09 15:15:36,903 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:36,903 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:36,903 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-09 15:15:36,903 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:36,903 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:36,903 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  I've
2025-06-09 15:15:36,903 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:36,903 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:36,903 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  started
2025-06-09 15:15:36,935 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:36,935 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-09 15:15:36,935 - telephony_realtime_bridge - INFO - Started play stream: feb0edd6-34fa-4d5f-88b2-38f921dd7819
2025-06-09 15:15:36,935 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-09 15:15:36,935 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-09 15:15:36,935 - multi_turn_test - INFO - [MOCK] Play stream started: feb0edd6-34fa-4d5f-88b2-38f921dd7819
2025-06-09 15:15:36,935 - multi_turn_test - INFO - [MOCK] Collecting response audio...
2025-06-09 15:15:36,935 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-09 15:15:36,935 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:36,951 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-09 15:15:36,970 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:36,970 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-09 15:15:36,974 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-09 15:15:36,976 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-09 15:15:36,976 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:36,977 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-09 15:15:37,010 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:37,010 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:37,013 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:37,022 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:37,022 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:37,024 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,028 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:37,024 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:37,028 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  the
2025-06-09 15:15:37,038 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:37,038 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:37,043 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:37,046 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:37,048 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:37,049 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:37,085 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:37,085 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:37,088 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:37,092 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:37,094 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:37,096 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:37,154 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,154 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 12
2025-06-09 15:15:37,155 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  replacement
2025-06-09 15:15:37,156 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,157 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:37,157 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  process
2025-06-09 15:15:37,157 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,157 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:37,157 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  for
2025-06-09 15:15:37,213 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:37,213 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:37,213 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:37,213 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:37,213 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:37,213 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:37,296 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:37,296 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 32000
2025-06-09 15:15:37,296 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 12000 -> 8000 samples, 500.0ms -> 500.0ms
2025-06-09 15:15:37,304 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 32000 bytes)
2025-06-09 15:15:37,304 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,304 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:37,304 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:37,304 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  your
2025-06-09 15:15:37,304 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (32000 bytes base64)
2025-06-09 15:15:37,304 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,304 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:37,309 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Gold
2025-06-09 15:15:37,312 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,312 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:37,312 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  card
2025-06-09 15:15:37,312 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,316 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:37,316 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-09 15:15:37,338 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,338 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:37,338 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  It
2025-06-09 15:15:37,338 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,345 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:37,345 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  will
2025-06-09 15:15:37,346 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,346 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:37,346 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  be
2025-06-09 15:15:37,350 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,356 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:37,356 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  sent
2025-06-09 15:15:37,357 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,357 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:37,357 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  to
2025-06-09 15:15:37,365 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:37,368 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:37,368 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  the
2025-06-09 15:15:37,511 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:37,511 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 48000
2025-06-09 15:15:37,511 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 18000 -> 12000 samples, 750.0ms -> 750.0ms
2025-06-09 15:15:37,519 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 48000 bytes)
2025-06-09 15:15:37,519 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:37,526 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (48000 bytes base64)
2025-06-09 15:15:37,815 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:37,818 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:37,818 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:37,825 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:37,826 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:37,827 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:38,003 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,004 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:38,005 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  address
2025-06-09 15:15:38,005 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,005 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:38,005 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  we
2025-06-09 15:15:38,006 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,006 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:38,006 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  have
2025-06-09 15:15:38,006 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,007 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:38,007 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  on
2025-06-09 15:15:38,007 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,007 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:38,007 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  file
2025-06-09 15:15:38,007 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,007 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:38,009 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-09 15:15:38,009 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,010 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:38,010 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Is
2025-06-09 15:15:38,010 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,012 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-09 15:15:38,012 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  there
2025-06-09 15:15:38,225 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:38,225 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:38,228 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:38,237 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:38,239 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:38,240 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:38,240 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:38,240 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:38,240 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:38,247 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:38,252 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:38,252 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:38,426 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,428 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 9
2025-06-09 15:15:38,428 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  anything
2025-06-09 15:15:38,429 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,429 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:38,429 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  else
2025-06-09 15:15:38,430 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,430 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 2
2025-06-09 15:15:38,431 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  I
2025-06-09 15:15:38,431 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,432 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:38,432 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  can
2025-06-09 15:15:38,432 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,432 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 7
2025-06-09 15:15:38,434 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  assist
2025-06-09 15:15:38,434 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,434 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:38,434 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-09 15:15:38,436 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,437 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:38,437 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  with
2025-06-09 15:15:38,437 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,438 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-09 15:15:38,438 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  today
2025-06-09 15:15:38,439 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:38,439 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:38,440 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ?
2025-06-09 15:15:38,511 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:38,511 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:38,512 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:38,520 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:38,522 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:38,525 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:38,646 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:38,646 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:38,648 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:38,658 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:38,659 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:38,661 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:38,943 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:38,944 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:38,946 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:38,954 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:38,954 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:38,954 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 63064
2025-06-09 15:15:38,955 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:38,955 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 23648 -> 15765 samples, 985.3ms -> 985.3ms
2025-06-09 15:15:38,956 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:38,963 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 63064 bytes)
2025-06-09 15:15:38,963 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-09 15:15:38,963 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-09 15:15:38,964 - telephony_realtime_bridge - INFO - Stopped play stream: feb0edd6-34fa-4d5f-88b2-38f921dd7819
2025-06-09 15:15:38,965 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-09 15:15:38,965 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): Great, I've started the replacement process for your Gold card. It will be sent to the address we have on file. Is there anything else I can assist you with today?
2025-06-09 15:15:38,965 - call_recorder - INFO - Transcript added: [bot] Great, I've started the replacement process for yo...
2025-06-09 15:15:38,965 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-09 15:15:38,965 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-09 15:15:38,965 - telephony_realtime_bridge - INFO - Content part completed
2025-06-09 15:15:38,966 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-09 15:15:38,966 - telephony_realtime_bridge - INFO - Output item completed
2025-06-09 15:15:38,967 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-09 15:15:38,967 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_Bgf4CbQ42jC7iNTbJPad0",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf48ob3rU7QWzVL4xmqc",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_Bgf48MRwiozUIJlqHf1yv",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "Great, I've started the replacement process for your Gold card. It will be sent to the address we have on file. Is there anything else I can assist you with today?"
          }
        ]
      }
    ],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 2338,
      "input_tokens": 2099,
      "output_tokens": 239,
      "input_token_details": {
        "text_tokens": 1462,
        "audio_tokens": 637,
        "cached_tokens": 1344,
        "cached_tokens_details": {
          "text_tokens": 960,
          "audio_tokens": 384
        }
      },
      "output_token_details": {
        "text_tokens": 51,
        "audio_tokens": 188
      }
    },
    "metadata": null
  }
}
2025-06-09 15:15:38,968 - telephony_realtime_bridge - INFO - Response generation completed: resp_Bgf48ob3rU7QWzVL4xmqc
2025-06-09 15:15:38,969 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-09 15:15:38,969 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:38,970 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (63064 bytes base64)
2025-06-09 15:15:38,971 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-09 15:15:38,971 - multi_turn_test - INFO - [MOCK] Response collected: 15 chunks
2025-06-09 15:15:38,972 - multi_turn_test - INFO - [MOCK] Play stream stopped: feb0edd6-34fa-4d5f-88b2-38f921dd7819
2025-06-09 15:15:39,067 - multi_turn_test - INFO - [MOCK] Response received: 15 chunks
2025-06-09 15:15:39,068 - multi_turn_test - INFO - [MOCK] Turn 4: AI response received (15 chunks)
2025-06-09 15:15:39,073 - multi_turn_test - INFO - [MOCK] Saved audio: turn_04_response_0b135b79.wav (14.23s)
2025-06-09 15:15:39,073 - multi_turn_test - INFO - [MOCK] Waiting 2.0s before next turn...
2025-06-09 15:15:41,084 - multi_turn_test - INFO - 
[MOCK] === Turn 5/5 ===
2025-06-09 15:15:41,084 - multi_turn_test - INFO - [MOCK] Sending: thanks_thats_all.wav
2025-06-09 15:15:41,086 - multi_turn_test - INFO - [MOCK] Loading audio: thanks_thats_all.wav
2025-06-09 15:15:41,087 - multi_turn_test - INFO -    Format: 1ch, 16bit, 24000Hz
2025-06-09 15:15:41,879 - multi_turn_test - INFO -    Resampling from 24000Hz to 16000Hz...
2025-06-09 15:15:41,909 - multi_turn_test - INFO -    Split into 1 chunks (~0.93s total)
2025-06-09 15:15:41,909 - multi_turn_test - INFO - [MOCK] Sending user audio: thanks_thats_all.wav (1 chunks)
2025-06-09 15:15:41,911 - telephony_realtime_bridge - INFO - Received telephony message: userStream.start
2025-06-09 15:15:41,911 - telephony_realtime_bridge - INFO - User stream start received: {'type': 'userStream.start', 'conversationId': '0b135b79-8451-4f58-af5a-b68b1bd2262a'}
2025-06-09 15:15:41,911 - telephony_realtime_bridge - INFO - User stream started for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:41,912 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.started
2025-06-09 15:15:41,912 - multi_turn_test - INFO - [MOCK] User stream started
2025-06-09 15:15:42,031 - multi_turn_test - DEBUG - [MOCK] Sent chunk 1/1
2025-06-09 15:15:42,033 - telephony_realtime_bridge - INFO - Received telephony message: userStream.chunk with audio chunk size: 39468 bytes
2025-06-09 15:15:42,033 - telephony_realtime_bridge - DEBUG - Processing audio chunk #1: 29600 -> 29600 bytes (~925.0ms of audio). Total sent: 29600 bytes
2025-06-09 15:15:42,033 - telephony_realtime_bridge - DEBUG - Sending audio to realtime-websocket (size: 39468 bytes base64)
2025-06-09 15:15:42,057 - multi_turn_test - INFO - [MOCK] User audio sent successfully
2025-06-09 15:15:42,057 - multi_turn_test - INFO - [MOCK] Turn 5: User audio sent successfully
eam.stop
2025-06-09 15:15:42,058 - telephony_realtime_bridge - INFO - User stream stop received for conversation: 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:42,058 - multi_turn_test - INFO - [MOCK] Waiting for LLM response...
2025-06-09 15:15:42,058 - telephony_realtime_bridge - INFO - Buffer state before commit: 1 chunks, 29600 bytes (~925.0ms of audio)
2025-06-09 15:15:42,058 - telephony_realtime_bridge - INFO - realtime_websocket_object: <bound method Connection.send of <websockets.asyncio.client.ClientConnection object at 0x000001FFC9B0DD00>>
2025-06-09 15:15:42,058 - telephony_realtime_bridge - INFO - Audio buffer committed with 1 chunks (29600 bytes)
2025-06-09 15:15:42,058 - telephony_realtime_bridge - INFO - Audio buffer commit sent: {"type":"input_audio_buffer.commit","event_id":null}
2025-06-09 15:15:42,058 - telephony_realtime_bridge - INFO - No active response - creating new response immediately
2025-06-09 15:15:42,058 - telephony_realtime_bridge - INFO - Response creation triggered after audio buffer commit
2025-06-09 15:15:42,063 - multi_turn_test - INFO - [MOCK] Received from bridge: userStream.stopped
2025-06-09 15:15:42,064 - multi_turn_test - INFO - [MOCK] User stream stopped
2025-06-09 15:15:42,171 - telephony_realtime_bridge - INFO - Received OpenAI message type: input_audio_buffer.committed
2025-06-09 15:15:42,178 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:42,179 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:42,181 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.created
2025-06-09 15:15:42,183 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.created",
  "event_id": "event_Bgf4FFACdYbpbE4PNgCMF",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf4FIOaFmNI9iy8eSvLy",
    "status": "in_progress",
    "status_details": null,
    "output": [],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": null,
    "metadata": null
  }
}
2025-06-09 15:15:42,184 - telephony_realtime_bridge - INFO - Response generation started: resp_Bgf4FIOaFmNI9iy8eSvLy
2025-06-09 15:15:42,560 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.added
2025-06-09 15:15:42,561 - telephony_realtime_bridge - INFO - Output item added: {
  "id": "item_Bgf4FTRowZMqqqzNPYdIm",
  "object": "realtime.item",
  "type": "message",
  "status": "in_progress",
  "role": "assistant",
  "content": []
}
2025-06-09 15:15:42,561 - telephony_realtime_bridge - INFO - Output item added: {'id': 'item_Bgf4FTRowZMqqqzNPYdIm', 'object': 'realtime.item', 'type': 'message', 'status': 'in_progress', 'role': 'assistant', 'content': []}
2025-06-09 15:15:42,562 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.created
2025-06-09 15:15:42,562 - telephony_realtime_bridge - INFO - Conversation item created
2025-06-09 15:15:42,571 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.added
2025-06-09 15:15:42,571 - telephony_realtime_bridge - INFO - Content part added: {
  "type": "audio",
  "transcript": ""
}
2025-06-09 15:15:42,571 - telephony_realtime_bridge - INFO - Content part added: {'type': 'audio', 'transcript': ''}
2025-06-09 15:15:42,577 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:42,578 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-09 15:15:42,578 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: You're
2025-06-09 15:15:42,578 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:42,578 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:42,580 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  welcome
2025-06-09 15:15:42,584 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:42,586 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:42,587 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: !
2025-06-09 15:15:42,593 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:42,593 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:42,593 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  If
2025-06-09 15:15:42,691 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:42,691 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 6400
2025-06-09 15:15:42,691 - telephony_realtime_bridge - INFO - Started play stream: 6f11cc03-c64e-4465-aa77-a33828840252
2025-06-09 15:15:42,691 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.start
2025-06-09 15:15:42,691 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 2400 -> 1600 samples, 100.0ms -> 100.0ms
2025-06-09 15:15:42,691 - multi_turn_test - INFO - [MOCK] Play stream started: 6f11cc03-c64e-4465-aa77-a33828840252
2025-06-09 15:15:42,691 - multi_turn_test - INFO - [MOCK] Collecting response audio...
2025-06-09 15:15:42,691 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 6400 bytes)
2025-06-09 15:15:42,691 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:42,691 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (6400 bytes base64)
2025-06-09 15:15:42,706 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:42,712 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 9600
2025-06-09 15:15:42,713 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 3600 -> 2400 samples, 150.0ms -> 150.0ms
2025-06-09 15:15:42,714 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 9600 bytes)
2025-06-09 15:15:42,714 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:42,714 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (9600 bytes base64)
2025-06-09 15:15:42,742 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:42,742 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:42,746 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:42,748 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:42,748 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:42,748 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:42,748 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:42,748 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  you
2025-06-09 15:15:42,748 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:42,748 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:42,748 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:42,748 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  need
2025-06-09 15:15:42,821 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:42,823 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:42,824 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:42,826 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:42,827 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:42,828 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:42,856 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:42,857 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:42,857 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:42,861 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:42,861 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:42,861 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:42,888 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:42,888 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:42,888 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  any
2025-06-09 15:15:42,896 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:42,904 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 8
2025-06-09 15:15:42,904 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  further
2025-06-09 15:15:42,904 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:42,904 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 11
2025-06-09 15:15:42,904 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  assistance
2025-06-09 15:15:42,912 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:42,912 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:42,912 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: ,
2025-06-09 15:15:42,980 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:42,980 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 16000
2025-06-09 15:15:42,982 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 6000 -> 4000 samples, 250.0ms -> 250.0ms
2025-06-09 15:15:42,985 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 16000 bytes)
2025-06-09 15:15:42,986 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:42,986 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (16000 bytes base64)
2025-06-09 15:15:43,062 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:43,064 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:43,064 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  feel
2025-06-09 15:15:43,064 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:43,064 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 32000
2025-06-09 15:15:43,064 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 12000 -> 8000 samples, 500.0ms -> 500.0ms
2025-06-09 15:15:43,069 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 32000 bytes)
2025-06-09 15:15:43,069 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:43,069 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:43,069 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:43,069 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (32000 bytes base64)
2025-06-09 15:15:43,069 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  free
2025-06-09 15:15:43,071 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:43,072 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 3
2025-06-09 15:15:43,072 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  to
2025-06-09 15:15:43,076 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:43,076 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-09 15:15:43,078 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  reach
2025-06-09 15:15:43,087 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:43,087 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:43,087 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  out
2025-06-09 15:15:43,093 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:43,093 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:43,093 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: .
2025-06-09 15:15:43,099 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:43,099 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 5
2025-06-09 15:15:43,099 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  Have
2025-06-09 15:15:43,279 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:43,280 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 48000
2025-06-09 15:15:43,281 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 18000 -> 12000 samples, 750.0ms -> 750.0ms
2025-06-09 15:15:43,286 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 48000 bytes)
2025-06-09 15:15:43,288 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:43,288 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (48000 bytes base64)
2025-06-09 15:15:43,324 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.delta
2025-06-09 15:15:43,325 - telephony_realtime_bridge - DEBUG - Received input audio transcription delta: Thanks, that's all.

2025-06-09 15:15:43,326 - telephony_realtime_bridge - INFO - Received OpenAI message type: conversation.item.input_audio_transcription.completed
2025-06-09 15:15:43,326 - telephony_realtime_bridge - INFO - Full user transcript (input audio): Thanks, that's all.

2025-06-09 15:15:43,327 - call_recorder - INFO - Transcript added: [caller] Thanks, that's all.
...
2025-06-09 15:15:43,327 - telephony_realtime_bridge - INFO - Input audio transcription completed
2025-06-09 15:15:43,357 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:43,359 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 2
2025-06-09 15:15:43,360 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  a
2025-06-09 15:15:43,374 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:43,374 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 6
2025-06-09 15:15:43,374 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  great
2025-06-09 15:15:43,374 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:43,374 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 4
2025-06-09 15:15:43,374 - telephony_realtime_bridge - DEBUG - Received audio transcript delta:  day
2025-06-09 15:15:43,393 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.delta
2025-06-09 15:15:43,393 - telephony_realtime_bridge - INFO - Audio event: response.audio_transcript.delta - delta size: 1
2025-06-09 15:15:43,394 - telephony_realtime_bridge - DEBUG - Received audio transcript delta: !
2025-06-09 15:15:43,525 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:43,525 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:43,525 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:43,531 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:43,531 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:43,531 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:43,661 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:43,661 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 64000
2025-06-09 15:15:43,663 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 24000 -> 16000 samples, 1000.0ms -> 1000.0ms
2025-06-09 15:15:43,669 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 64000 bytes)
2025-06-09 15:15:43,670 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:43,670 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (64000 bytes base64)
2025-06-09 15:15:43,824 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.delta
2025-06-09 15:15:43,825 - telephony_realtime_bridge - INFO - Audio event: response.audio.delta - delta size: 88664
2025-06-09 15:15:43,826 - call_recorder - DEBUG - Audio resampling: 24000Hz -> 16000Hz, 33248 -> 22165 samples, 1385.3ms -> 1385.3ms
2025-06-09 15:15:43,835 - telephony_realtime_bridge - DEBUG - Sent audio chunk to client (size: 88664 bytes)
2025-06-09 15:15:43,836 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio.done
2025-06-09 15:15:43,836 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.chunk
2025-06-09 15:15:43,836 - telephony_realtime_bridge - INFO - Audio response completed
2025-06-09 15:15:43,836 - multi_turn_test - DEBUG - [MOCK] Received audio chunk (88664 bytes base64)
2025-06-09 15:15:43,837 - telephony_realtime_bridge - INFO - Stopped play stream: 6f11cc03-c64e-4465-aa77-a33828840252
2025-06-09 15:15:43,837 - multi_turn_test - INFO - [MOCK] Received from bridge: playStream.stop
2025-06-09 15:15:43,837 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.audio_transcript.done
2025-06-09 15:15:43,837 - multi_turn_test - INFO - [MOCK] Response collected: 11 chunks
2025-06-09 15:15:43,838 - telephony_realtime_bridge - INFO - Full AI transcript (output audio): You're welcome! If you need any further assistance, feel free to reach out. Have a great day!
2025-06-09 15:15:43,838 - multi_turn_test - INFO - [MOCK] Play stream stopped: 6f11cc03-c64e-4465-aa77-a33828840252
2025-06-09 15:15:43,838 - call_recorder - INFO - Transcript added: [bot] You're welcome! If you need any further assistance...
2025-06-09 15:15:43,839 - telephony_realtime_bridge - INFO - Audio transcript completed
2025-06-09 15:15:43,839 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.content_part.done
2025-06-09 15:15:43,839 - telephony_realtime_bridge - INFO - Content part completed
2025-06-09 15:15:43,840 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.output_item.done
2025-06-09 15:15:43,840 - telephony_realtime_bridge - INFO - Output item completed
2025-06-09 15:15:43,841 - telephony_realtime_bridge - INFO - Received OpenAI message type: response.done
2025-06-09 15:15:43,841 - telephony_realtime_bridge - INFO - Response event details: {
  "type": "response.done",
  "event_id": "event_Bgf4HjupwmBzqcaJ3UnSq",
  "response": {
    "object": "realtime.response",
    "id": "resp_Bgf4FIOaFmNI9iy8eSvLy",
    "status": "completed",
    "status_details": null,
    "output": [
      {
        "id": "item_Bgf4FTRowZMqqqzNPYdIm",
        "object": "realtime.item",
        "type": "message",
        "status": "completed",
        "role": "assistant",
        "content": [
          {
            "type": "audio",
            "transcript": "You're welcome! If you need any further assistance, feel free to reach out. Have a great day!"
          }
        ]
      }
    ],
    "conversation_id": "conv_Bgf3lNpBbO7D8mf9rPnVi",
    "modalities": [
      "audio",
      "text"
    ],
    "voice": "verse",
    "output_audio_format": "pcm16",
    "temperature": 0.8,
    "max_output_tokens": 4096,
    "usage": {
      "total_tokens": 2505,
      "input_tokens": 2354,
      "output_tokens": 151,
      "input_token_details": {
        "text_tokens": 1523,
        "audio_tokens": 831,
        "cached_tokens": 1920,
        "cached_tokens_details": {
          "text_tokens": 1280,
          "audio_tokens": 640
        }
      },
      "output_token_details": {
        "text_tokens": 35,
        "audio_tokens": 116
      }
    },
    "metadata": null
  }
}
2025-06-09 15:15:43,842 - telephony_realtime_bridge - INFO - Response generation completed: resp_Bgf4FIOaFmNI9iy8eSvLy
2025-06-09 15:15:43,842 - telephony_realtime_bridge - INFO - Received OpenAI message type: rate_limits.updated
2025-06-09 15:15:43,940 - multi_turn_test - INFO - [MOCK] Response received: 11 chunks
2025-06-09 15:15:43,941 - multi_turn_test - INFO - [MOCK] Turn 5: AI response received (11 chunks)
2025-06-09 15:15:43,946 - multi_turn_test - INFO - [MOCK] Saved audio: turn_05_response_0b135b79.wav (8.83s)
2025-06-09 15:15:43,947 - multi_turn_test - INFO - 
[MOCK] Multi-turn conversation completed:
2025-06-09 15:15:43,948 - multi_turn_test - INFO -    Completed turns: 5/5
2025-06-09 15:15:43,948 - multi_turn_test - INFO - [MOCK] Sent session.end: ReplacementCardConversation completed
2025-06-09 15:15:43,949 - telephony_realtime_bridge - INFO - Received telephony message: session.end
2025-06-09 15:15:43,949 - telephony_realtime_bridge - INFO - Session end received: ReplacementCardConversation completed
2025-06-09 15:15:43,951 - call_recorder - INFO - Transcript saved: call_recordings\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511\transcript.json
2025-06-09 15:15:43,952 - multi_turn_test - INFO - [MOCK] Saved audio: greeting_0b135b79.wav (2.75s)
2025-06-09 15:15:43,953 - call_recorder - INFO - Metadata saved: call_recordings\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511\call_metadata.json
2025-06-09 15:15:43,955 - call_recorder - INFO - Session events saved: call_recordings\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511\session_events.json
2025-06-09 15:15:43,956 - multi_turn_test - INFO - [MOCK] Saved audio: response_0b135b79.wav (8.83s)
2025-06-09 15:15:43,956 - multi_turn_test - INFO - 
==================================================
2025-06-09 15:15:43,957 - multi_turn_test - INFO - [MOCK] MULTI-TURN CONVERSATION SUMMARY
2025-06-09 15:15:43,957 - multi_turn_test - INFO - ==================================================
2025-06-09 15:15:43,957 - multi_turn_test - INFO - Overall Status: SUCCESS
2025-06-09 15:15:43,959 - multi_turn_test - INFO - Completed Turns: 5/5
2025-06-09 15:15:43,959 - multi_turn_test - INFO - Initial Greeting: Received (7 chunks)
2025-06-09 15:15:43,959 - multi_turn_test - INFO - 
Turn-by-turn Results:
2025-06-09 15:15:43,960 - multi_turn_test - INFO -   Turn 1: need_to_replace_card.wav â†’ Audio Sent â†’ Response Received (15 chunks)
2025-06-09 15:15:43,960 - multi_turn_test - INFO -   Turn 2: my_gold_card.wav â†’ Audio Sent â†’ Response Received (14 chunks)
2025-06-09 15:15:43,960 - multi_turn_test - INFO -   Turn 3: i_lost_it.wav â†’ Audio Sent â†’ Response Received (16 chunks)
2025-06-09 15:15:43,961 - multi_turn_test - INFO -   Turn 4: yes_that_address.wav â†’ Audio Sent â†’ Response Received (15 chunks)
2025-06-09 15:15:43,961 - multi_turn_test - INFO -   Turn 5: thanks_thats_all.wav â†’ Audio Sent â†’ Response Received (11 chunks)
2025-06-09 15:15:43,962 - multi_turn_test - INFO - ==================================================
2025-06-09 15:15:43,963 - multi_turn_test - INFO - 
[TEST] ReplacementCardConversation completed successfully!
2025-06-09 15:15:43,963 - call_recorder - INFO - Final stereo recording created: call_recordings\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511\final_stereo_recording.wav (46.01s)
2025-06-09 15:15:43,963 - call_recorder - INFO - Audio resampling applied - Bot audio resampled from 24000Hz to 16000Hz
2025-06-09 15:15:43,964 - call_recorder - INFO - Recording stopped and finalized for conversation 0b135b79-8451-4f58-af5a-b68b1bd2262a
2025-06-09 15:15:43,964 - telephony_realtime_bridge - INFO - Call recording finalized: {'conversation_id': '0b135b79-8451-4f58-af5a-b68b1bd2262a', 'session_id': '0b135b79-8451-4f58-af5a-b68b1bd2262a', 'recording_dir': 'call_recordings\\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511', 'recording_active': False, 'finalized': True, 'files': {'caller_audio': 'call_recordings\\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511\\caller_audio.wav', 'bot_audio': 'call_recordings\\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511\\bot_audio.wav', 'stereo_audio': 'call_recordings\\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511\\stereo_recording.wav', 'transcript': 'call_recordings\\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511\\transcript.json', 'metadata': 'call_recordings\\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511\\call_metadata.json', 'session_events': 'call_recordings\\0b135b79-8451-4f58-af5a-b68b1bd2262a_20250609_151511\\session_events.json'}, 'stats': {'conversation_id': '0b135b79-8451-4f58-af5a-b68b1bd2262a', 'session_id': '0b135b79-8451-4f58-af5a-b68b1bd2262a', 'start_time': '2025-06-09T22:15:11.916497+00:00', 'end_time': '2025-06-09T22:15:43.949801+00:00', 'duration_seconds': 32.033304, 'caller_audio_chunks': 8, 'bot_audio_chunks': 78, 'caller_audio_bytes': 184800, 'bot_audio_bytes': 1472380, 'caller_audio_duration_seconds': 5.775, 'bot_audio_duration_seconds': 46.011875, 'transcript_entries': 10, 'function_calls': [{'timestamp': '2025-06-09T22:15:16.612984+00:00', 'function_name': 'call_intent', 'arguments': {'intent': 'card_replacement'}, 'result': {'status': 'success', 'intent': 'card_replacement', 'next_action': 'ask_card_type', 'available_cards': ['Gold card', 'Silver card', 'Basic card'], 'prompt_guidance': 'Ask the customer which type of card they need to replace: Gold card, Silver card, or Basic card.'}, 'call_id': 'call_ZstM4B6GavLYM1c9'}, {'timestamp': '2025-06-09T22:15:22.547381+00:00', 'function_name': 'replacement_reason', 'arguments': {'card_in_context': 'Gold card'}, 'result': {'status': 'success', 'function_name': 'replacement_reason', 'prompt_guidance': '\nThe customer wants to replace their Gold card. We need the reason they \nwant to replace their card.\n\nBased on their response, call the `replacement_reason` function with the reason.\n\nValid reasons:\n- Lost\n- Damaged\n- Stolen\n- Other\n', 'next_action': 'ask_reason', 'valid_reasons': ['Lost', 'Damaged', 'Stolen', 'Other'], 'selected_reason': '', 'context': {'stage': 'reason_collection', 'card_in_context': 'Gold card', 'reason': ''}}, 'call_id': 'call_Cgg5Y31japZRnMDi'}, {'timestamp': '2025-06-09T22:15:28.435177+00:00', 'function_name': 'replacement_reason', 'arguments': {'card_in_context': 'Gold card', 'reason': 'Lost'}, 'result': {'status': 'success', 'function_name': 'replacement_reason', 'prompt_guidance': '\nThe customer wants to replace their Gold card. We need the reason they \nwant to replace their card.\n\nBased on their response, call the `replacement_reason` function with the reason.\n\nValid reasons:\n- Lost\n- Damaged\n- Stolen\n- Other\n', 'next_action': 'collect_address', 'valid_reasons': ['Lost', 'Damaged', 'Stolen', 'Other'], 'selected_reason': 'Lost', 'context': {'stage': 'reason_collection', 'card_in_context': 'Gold card', 'reason': 'Lost'}}, 'call_id': 'call_WMhIro5rnxRU6eFd'}, {'timestamp': '2025-06-09T22:15:34.900665+00:00', 'function_name': 'confirm_address', 'arguments': {'card_in_context': 'Gold card', 'address_on_file': 'Yes'}, 'result': {'status': 'success', 'function_name': 'confirm_address', 'prompt_guidance': '\nThe customer wants to replace their Gold card. We need the address to mail the new card.\nThe address on file with this card is: Yes.\n\nCall the `confirm_address` function with the confirmed address.\n', 'next_action': 'confirm_address', 'address_on_file': 'Yes', 'confirmed_address': '', 'context': {'stage': 'address_confirmation', 'card_in_context': 'Gold card', 'address_on_file': 'Yes', 'confirmed_address': ''}}, 'call_id': 'call_US0ZCSSTkqUgHvZt'}, {'timestamp': '2025-06-09T22:15:35.509885+00:00', 'function_name': 'start_card_replacement', 'arguments': {'address_in_context': 'Yes', 'card_in_context': 'Gold card'}, 'result': {'status': 'success', 'function_name': 'start_card_replacement', 'prompt_guidance': '\nThe customer has confirmed the address for the Gold card at Yes.\nLet them know you are starting the card replacement process.\n', 'next_action': 'finish_replacement', 'context': {'stage': 'replacement_started', 'card_in_context': 'Gold card', 'address_in_context': 'Yes'}}, 'call_id': 'call_aAlscfU9T30xq0mC'}]}}
2025-06-09 15:15:43,966 - multi_turn_test - INFO - [MOCK] Disconnected from bridge server
2025-06-09 15:15:43,967 - multi_turn_test - INFO - [MAIN] Replacement card conversation flow completed: True
2025-06-09 15:15:44,031 - telephony_realtime_bridge - INFO - Telephony-Realtime bridge closed
2025-06-09 15:15:44,031 - main - INFO - Closing bridge...
